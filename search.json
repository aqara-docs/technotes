[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Technotes",
    "section": "",
    "text": "ê¸°ìˆ  ë¬¸ì„œ (CSíŒ€)",
    "crumbs": [
      "ê¸°ìˆ  ë¬¸ì„œ (CSíŒ€)"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html",
    "href": "naver_aqaracafe.html",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "",
    "text": "9.1 í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ë° MySQL. ì—°ê²°",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#í™˜ê²½-ë³€ìˆ˜-ì„¤ì •-ë°-mysql.-ì—°ê²°",
    "href": "naver_aqaracafe.html#í™˜ê²½-ë³€ìˆ˜-ì„¤ì •-ë°-mysql.-ì—°ê²°",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "",
    "text": "from dotenv import load_dotenv\nload_dotenv()\n\ndb_config = {\n    'user': os.getenv('SQL_USER'),\n    'password': os.getenv('SQL_PASSWORD'),\n    'host': os.getenv('SQL_HOST'),\n    'database': os.getenv('SQL_DATABASE'),\n    'charset': 'utf8mb4',\n    'collation': 'utf8mb4_general_ci'\n}\n\ndotenv ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ .env íŒŒì¼ì—ì„œ MySQL ë° ë„¤ì´ë²„ ì¹´í˜ ë¡œê·¸ì¸ ê´€ë ¨ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.\nì´ë¥¼ í†µí•´ MySQLì— ì—°ê²°í•  ë•Œ í•„ìš”í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#ë„¤ì´ë²„-ì¹´í˜-í¬ë¡¤ë§-í´ë˜ìŠ¤-ì •ì˜",
    "href": "naver_aqaracafe.html#ë„¤ì´ë²„-ì¹´í˜-í¬ë¡¤ë§-í´ë˜ìŠ¤-ì •ì˜",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "9.2 ë„¤ì´ë²„ ì¹´í˜ í¬ë¡¤ë§ í´ë˜ìŠ¤ ì •ì˜",
    "text": "9.2 ë„¤ì´ë²„ ì¹´í˜ í¬ë¡¤ë§ í´ë˜ìŠ¤ ì •ì˜\nclass NaverCafeCrawler:\n    def __init__(self, driver_path, url, id, pw, baseurl, clubid, userDisplay, boardType, db_config):\n        self.total_list = ['registered_date', 'devices', 'title', 'question', 'answers']\n        self.driver_path = driver_path\n        self.url = url\n        self.id = id\n        self.pw = pw\n        self.baseurl = baseurl\n        self.clubid = clubid\n        self.userDisplay = userDisplay\n        self.boardType = boardType\n        self.db_config = db_config\n\nNaverCafeCrawler í´ë˜ìŠ¤ëŠ” í¬ë¡¤ë§ì˜ ì£¼ìš” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.\ní´ë˜ìŠ¤ëŠ” ë¡œê·¸ì¸ ì •ë³´, í¬ë¡¤ë§í•  URL, MySQL ì—°ê²° ì •ë³´ ë“±ì„ ì´ˆê¸°í™”í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#ë¡œê·¸ì¸-í•¨ìˆ˜",
    "href": "naver_aqaracafe.html#ë¡œê·¸ì¸-í•¨ìˆ˜",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "9.3 ë¡œê·¸ì¸ í•¨ìˆ˜",
    "text": "9.3 ë¡œê·¸ì¸ í•¨ìˆ˜\ndef login(self, browser):\n    browser.get(self.url)\n    browser.implicitly_wait(2)\n    browser.execute_script(f\"document.getElementsByName('id')[0].value='{self.id}'\")\n    browser.execute_script(f\"document.getElementsByName('pw')[0].value='{self.pw}'\")\n    browser.find_element(By.XPATH, '//*[@id=\"log.login\"]').click()\n    time.sleep(1)\n\në„¤ì´ë²„ ì¹´í˜ì— ìë™ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\nSeleniumì„ ì‚¬ìš©í•´ IDì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#í˜ì´ì§€-í¬ë¡¤ë§-í•¨ìˆ˜",
    "href": "naver_aqaracafe.html#í˜ì´ì§€-í¬ë¡¤ë§-í•¨ìˆ˜",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "9.4 í˜ì´ì§€ í¬ë¡¤ë§ í•¨ìˆ˜",
    "text": "9.4 í˜ì´ì§€ í¬ë¡¤ë§ í•¨ìˆ˜\ndef crawl_page(self, browser, page_num):\n    browser.get(f\"{self.baseurl}ArticleList.nhn?search.clubid={self.clubid}&userDisplay={self.userDisplay}&search.boardType={self.boardType}&search.page={page_num}\")\n    browser.switch_to.frame('cafe_main')\n    soup = bs(browser.page_source, 'html.parser')\n    datas = soup.find_all(class_='td_article')\n    ...\n\nì§€ì •ëœ í˜ì´ì§€ ë²ˆí˜¸ì˜ ê²Œì‹œê¸€ ëª©ë¡ì„ í¬ë¡¤ë§í•œë‹¤.\nSeleniumì„ ì‚¬ìš©í•´ ì¹´í˜ ê²Œì‹œíŒì˜ íŠ¹ì • í˜ì´ì§€ë¡œ ì´ë™í•˜ê³ , BeautifulSoupì„ ì‚¬ìš©í•´ ê²Œì‹œê¸€ì˜ ì œëª©, ì¹´í…Œê³ ë¦¬, ë§í¬ ë“±ì„ íŒŒì‹±í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#section",
    "href": "naver_aqaracafe.html#section",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "9.5 ",
    "text": "9.5 \nê²Œì‹œê¸€ ìƒì„¸ ë‚´ìš© í¬ë¡¤ë§\ndef get_content(self, browser, link):\n    browser.get(link)\n    time.sleep(1)\n    browser.switch_to.frame('cafe_main')\n    soup = bs(browser.page_source, 'html.parser')\n    content_text = soup.find(\"div\", {\"class\": \"article_viewer\"}).get_text().strip() if content else \"\"\n    ...\n\nê° ê²Œì‹œê¸€ì˜ ë§í¬ë¡œ ì´ë™í•˜ì—¬ ìƒì„¸ ë‚´ìš©ì„ í¬ë¡¤ë§í•œë‹¤.\nê²Œì‹œê¸€ì˜ ë³¸ë¬¸ ë‚´ìš©ê³¼ ë“±ë¡ ë‚ ì§œ, ëŒ“ê¸€(ë‹µë³€)ì„ ì¶”ì¶œí•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#mysql-ì €ì¥-í•¨ìˆ˜",
    "href": "naver_aqaracafe.html#mysql-ì €ì¥-í•¨ìˆ˜",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "9.6 MySQL ì €ì¥ í•¨ìˆ˜",
    "text": "9.6 MySQL ì €ì¥ í•¨ìˆ˜\ndef save_to_mysql(self, df):\n    conn = mysql.connector.connect(**self.db_config)\n    cursor = conn.cursor()\n\n    for _, row in df.iterrows():\n        check_sql = \"SELECT COUNT(*) FROM aqara_cafe WHERE registered_date = %s AND title = %s\"\n        cursor.execute(check_sql, (row['registered_date'], row['title']))\n        result = cursor.fetchone()\n\n        if result[0] == 0:\n            insert_sql = \"INSERT INTO aqara_cafe (registered_date, devices, title, question, answers) VALUES (%s, %s, %s, %s, %s)\"\n            cursor.execute(insert_sql, tuple(row))\n    \n    conn.commit()\n    cursor.close()\n    conn.close()\n\ní¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ DataFrameìœ¼ë¡œ ë°›ì•„ MySQL ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\nì¤‘ë³µëœ ë°ì´í„°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ registered_dateì™€ titleì„ ê¸°ì¤€ìœ¼ë¡œ ì´ë¯¸ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„, ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë°ì´í„°ë¥¼ ì‚½ì…í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "naver_aqaracafe.html#í¬ë¡¤ëŸ¬-ì‹¤í–‰",
    "href": "naver_aqaracafe.html#í¬ë¡¤ëŸ¬-ì‹¤í–‰",
    "title": "9Â  ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§",
    "section": "9.7 í¬ë¡¤ëŸ¬ ì‹¤í–‰",
    "text": "9.7 í¬ë¡¤ëŸ¬ ì‹¤í–‰\ncrawler = NaverCafeCrawler(driver_path, url, id, pw, baseurl, clubid, userDisplay, boardType, db_config)\ncrawler.run(max_pages=params_pages)\n\nì„¤ì •ëœ ë§¤ê°œë³€ìˆ˜ë¡œ í¬ë¡¤ë§ì„ ì‹¤í–‰í•œë‹¤.\nìµœëŒ€ í˜ì´ì§€ ìˆ˜(max_pages) ë§Œí¼ í˜ì´ì§€ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ í¬ë¡¤ë§í•˜ê³ , ë°ì´í„°ë¥¼ CSVë¡œ ì €ì¥í•œ í›„ MySQLë¡œ ì „ì†¡í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>9</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ì•„ì¹´ë¼ ì¹´í˜ ì›¹í¬ë¡¤ë§</span>"
    ]
  },
  {
    "objectID": "channeltalk.html",
    "href": "channeltalk.html",
    "title": "8Â  ì±„ë„í†¡ API ì—°ë™",
    "section": "",
    "text": "8.1 API ì—°ë™",
    "crumbs": [
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>ì±„ë„í†¡ API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "channeltalk.html#api-ì—°ë™",
    "href": "channeltalk.html#api-ì—°ë™",
    "title": "8Â  ì±„ë„í†¡ API ì—°ë™",
    "section": "",
    "text": "8.1.1 API ì¸ì¦í‚¤ ë§Œë“¤ê¸°\n\n\n\n8.1.2 Access Keyì™€ Access Secretì„ ì´ìš©í•œ API ì—°ë™\n[ì°¸ê³ ] ìƒˆ APIì˜ ê²½ìš° access token ë°©ì‹ìœ¼ë¡œ ë°”ë€œ. ì—¬ì „íˆ ì•„ë˜ ë°©ì‹ ì‚¬ìš© ê°€ëŠ¥\nimport requests\nimport pandas as pd\nfrom datetime import datetime, timedelta\n\naccess_key = \"xxxxxxx\"\naccess_secret = \"xxxxxxx\"\n\n# ì–´ì œì™€ ì˜¤ëŠ˜ì˜ ë‚ ì§œ êµ¬í•˜ê¸°\nyesterday = datetime.now() - timedelta(days=1)\ntoday = datetime.now()\n\n# API ì—”ë“œí¬ì¸íŠ¸ ë° ì¸ì¦ ì •ë³´\nurl = \"https://api.channel.io/open/v5/user-chats\"\nheaders = {\n    \"accept\": \"application/json\",\n    \"x-access-key\": f\"{access_key}\",\n    \"x-access-secret\": f\"{access_secret}\"\n}\nparams = {\n    \"state\": \"opened\",\n    \"sortOrder\": \"desc\",\n    \"limit\": 100,\n    \"from\": int(yesterday.timestamp() * 1000),  # ì–´ì œ ìì •ë¶€í„°\n    \"to\": int(today.timestamp() * 1000)  # í˜„ì¬ê¹Œì§€\n}\n\n# API ìš”ì²­ ë³´ë‚´ê¸°\nresponse = requests.get(url, headers=headers, params=params)\n\n# ì‘ë‹µ í™•ì¸\nif response.status_code == 200:\n    chats = response.json().get(\"messages\", [])\n    #print(chats)\n    df = pd.DataFrame(chats)\n    df = df[['personType','plainText', 'updatedAt', 'createdAt']].rename(columns={'plainText': 'text'})\n    df = df[df['text'].str.strip() != '']\n    # updatedAtê³¼ createdAtì˜ timestamp ê°’ì„ datetime í˜•ì‹ìœ¼ë¡œ ë³€í™˜\n    df['updatedAt'] = pd.to_datetime(df['updatedAt'], unit='ms') + pd.Timedelta(hours=9)\n    df['createdAt'] = pd.to_datetime(df['createdAt'], unit='ms') + pd.Timedelta(hours=9)\n    df_sorted = df.loc[df['personType']==\"user\", ['updatedAt', 'text','personType']].sort_values(by='updatedAt', ascending=False)\n    df_sorted.loc[:,['updatedAt','text']].dropna().head(10)\nelse:\n    print(\"API ìš”ì²­ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.\")",
    "crumbs": [
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>ì±„ë„í†¡ API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "channeltalk.html#ì£¼ìš”-ì½”ë“œ-ë¶„ì„",
    "href": "channeltalk.html#ì£¼ìš”-ì½”ë“œ-ë¶„ì„",
    "title": "8Â  ì±„ë„í†¡ API ì—°ë™",
    "section": "8.2 ì£¼ìš” ì½”ë“œ ë¶„ì„",
    "text": "8.2 ì£¼ìš” ì½”ë“œ ë¶„ì„\n\n8.2.1 í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ ë° ì¸ì¦ ì •ë³´ ì„¤ì •\nimport os\nfrom dotenv import load_dotenv\nload_dotenv()\n\nchanneltalk_access_key = os.getenv('CHANNELTALK_ACCESS_KEY')\nchanneltalk_access_secret = os.getenv('CHANNELTALK_ACCESS_SECRET')* \n\ndotenvë¥¼ ì‚¬ìš©í•´ .env íŒŒì¼ì—ì„œ ì±„ë„í†¡ API ì¸ì¦ ì •ë³´(CHANNELTALK_ACCESS_KEY, CHANNELTALK_ACCESS_SECRET)ë¥¼ ë¡œë“œí•œë‹¤. ì´ë¥¼ í†µí•´ API ìš”ì²­ì— í•„ìš”í•œ ì¸ì¦ ì •ë³´ë¥¼ ì„¤ì •í•œë‹¤.\n\n\n\n8.2.2 ë‚ ì§œ ì„¤ì •\nyesterday = datetime.now() - timedelta(days=1)\ntoday = datetime.now()\n\nyesterdayëŠ” ì–´ì œì˜ ë‚ ì§œ, todayëŠ” ì˜¤ëŠ˜ì˜ ë‚ ì§œë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ì±„íŒ… ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ê¸°ê°„ì„ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.\n\n\n\n8.2.3 API ìš”ì²­ íŒŒë¼ë¯¸í„° ì„¤ì •\nparams = {\n    \"state\": params_state,\n    \"sortOrder\": params_sort,\n    \"limit\": params_limit,\n    \"from\": int(yesterday.timestamp() * 1000),  # ì–´ì œ ìì •ë¶€í„°\n    \"to\": int(today.timestamp() * 1000)  # í˜„ì¬ê¹Œì§€\n}\nAPI ìš”ì²­ì— ì‚¬ìš©í•  íŒŒë¼ë¯¸í„°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n\nstate: ê³ ê° ì§€ì› ìƒíƒœ (opened ë˜ëŠ” closed)\nsortOrder: ì •ë ¬ ìˆœì„œ (desc ë˜ëŠ” asc)\nlimit: ìš”ì²­í•  ë°ì´í„°ì˜ ìˆ˜ (ìµœì†Œ 20, ìµœëŒ€ 500)\nfrom/to: ê²€ìƒ‰í•  ê¸°ê°„ì˜ ì‹œì‘ê³¼ ëì„ Unix timestamp í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•œ ê°’ì…ë‹ˆë‹¤.\n\n\n\n8.2.4 \nAPI ìš”ì²­ ë° ì‘ë‹µ ì²˜ë¦¬\nresponse = requests.get(url, headers=headers, params=params)\nif response.status_code == 200:\n    chats = response.json().get(\"messages\", [])\n    df = pd.DataFrame(chats)\nrequests.get()ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì •ëœ URLê³¼ íŒŒë¼ë¯¸í„°ë¡œ API ìš”ì²­ì„ ë³´ë‚´ê³ , ì„±ê³µí•˜ë©´ ì‘ë‹µ ë°ì´í„°ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë°›ì•„ì„œ ì²˜ë¦¬í•œë‹¤.\n\nì‘ë‹µ ë°ì´í„°ì—ì„œ messages í‚¤ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ pandas DataFrameìœ¼ë¡œ ë³€í™˜í•œë‹¤.\n\n\n\n8.2.5 ë°ì´í„° ì •ì œ ë° ë³€í™˜\ndf = df[['plainText', 'updatedAt', 'createdAt']].rename(columns={'plainText': 'text'})\ndf['updatedAt'] = pd.to_datetime(df['updatedAt'], unit='ms') + pd.Timedelta(hours=9)\ndf['createdAt'] = pd.to_datetime(df['createdAt'], unit='ms') + pd.Timedelta(hours=9)\ndf_sorted = df.loc[:, ['updatedAt', 'text']].sort_values(by='updatedAt', ascending=sort_status)\n\nAPIì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ plainText, updatedAt, createdAt ì»¬ëŸ¼ë§Œ ì¶”ì¶œí•˜ê³ , ì´ë¥¼ ì ì ˆí•˜ê²Œ ì´ë¦„ ë³€ê²½(text)í•˜ê³  ì •ë ¬í•œë‹¤.\níƒ€ì„ìŠ¤íƒ¬í”„ ê°’ì„ datetime í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•œ í›„, ì‹œê°„ëŒ€ë¥¼ ê³ ë ¤í•´ 9ì‹œê°„ì„ ë”í•œë‹¤. (í•œêµ­ ì‹œê°„ ê¸°ì¤€)",
    "crumbs": [
      "<span class='chapter-number'>8</span>Â  <span class='chapter-title'>ì±„ë„í†¡ API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "homeassistant.html",
    "href": "homeassistant.html",
    "title": "1Â  í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant",
    "section": "",
    "text": "1.1 Matterì— ê´€í•œ ê¸°ë³¸ ìƒì‹\nMatterëŠ” ìŠ¤ë§ˆíŠ¸ í™ˆ ê¸°ê¸°ë“¤ì„ ì„œë¡œ í˜¸í™˜ë˜ê²Œ ì—°ê²°í•˜ê¸° ìœ„í•´ ê°œë°œëœ í‘œì¤€ í”„ë¡œí† ì½œì…ë‹ˆë‹¤. ì´ í‘œì¤€ì€ ë‹¤ì–‘í•œ ì œì¡°ì‚¬ì˜ ìŠ¤ë§ˆíŠ¸ í™ˆ ì œí’ˆë“¤ì´ ì›í™œí•˜ê²Œ í†µì‹ í•˜ê³  ì œì–´ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. MatterëŠ” Zigbee Alliance(í˜„ì¬ëŠ” Connectivity Standards Alliance, CSAë¡œ ëª…ì¹­ ë³€ê²½)ê°€ ì£¼ë„í•˜ë©°, êµ¬ê¸€, ì• í”Œ, ì•„ë§ˆì¡´, ì‚¼ì„± ë“± ì£¼ìš” ê¸°ìˆ  ê¸°ì—…ë“¤ì´ ì°¸ì—¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ëŠ” Matterì™€ ê´€ë ¨ëœ ì£¼ìš” ê°œë…ë“¤ì— ëŒ€í•œ ì„¤ëª…ì…ë‹ˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant</span>"
    ]
  },
  {
    "objectID": "homeassistant.html#matterì—-ê´€í•œ-ê¸°ë³¸-ìƒì‹",
    "href": "homeassistant.html#matterì—-ê´€í•œ-ê¸°ë³¸-ìƒì‹",
    "title": "1Â  í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant",
    "section": "",
    "text": "1.1.1 Matter Controller (or Hub)\nMatter ControllerëŠ” Matter ìƒíƒœê³„ ë‚´ì—ì„œ ì—¬ëŸ¬ ì¥ì¹˜ë“¤ì„ ì—°ê²°í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì¤‘ì‹¬ ì—­í• ì„ í•˜ëŠ” ì¥ì¹˜ì…ë‹ˆë‹¤. ì£¼ë¡œ ìŠ¤ë§ˆíŠ¸í°, ìŠ¤ë§ˆíŠ¸ ìŠ¤í”¼ì»¤, ìŠ¤ë§ˆíŠ¸ ë””ìŠ¤í”Œë ˆì´ ë“±ì´ ì´ ì—­í• ì„ í•©ë‹ˆë‹¤. Matter ControllerëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:\n\nì¥ì¹˜ ë“±ë¡ ë° ì„¤ì •: ìƒˆë¡œìš´ Matter ì¥ì¹˜ë¥¼ ë„¤íŠ¸ì›Œí¬ì— ì¶”ê°€í•˜ê³  ì´ˆê¸° ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\nì¥ì¹˜ ê´€ë¦¬: ì—°ê²°ëœ ëª¨ë“  Matter ì¥ì¹˜ë“¤ì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ì œì–´í•©ë‹ˆë‹¤.\nìë™í™” ë° ìŠ¤ì¼€ì¤„ë§: ë‹¤ì–‘í•œ ìë™í™” ì‹œë‚˜ë¦¬ì˜¤ì™€ ìŠ¤ì¼€ì¤„ì„ ì„¤ì •í•˜ì—¬ ì¥ì¹˜ë“¤ì´ íŠ¹ì • ì¡°ê±´ì—ì„œ ë™ì‘í•˜ë„ë¡ í•©ë‹ˆë‹¤.\në³´ì•ˆ: ë„¤íŠ¸ì›Œí¬ì˜ ë³´ì•ˆì„ ìœ ì§€í•˜ê³  ì¥ì¹˜ë“¤ ê°„ì˜ ì•ˆì „í•œ í†µì‹ ì„ ë³´ì¥í•©ë‹ˆë‹¤.\n\n\n\n1.1.2 Matter Bridge\nMatter BridgeëŠ” Matter ë„¤íŠ¸ì›Œí¬ì™€ ë‹¤ë¥¸ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ì¥ì¹˜ë“¤ ì‚¬ì´ì˜ ë‹¤ë¦¬ ì—­í• ì„ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Zigbeeë‚˜ Z-Wave ì¥ì¹˜ë¥¼ Matter ë„¤íŠ¸ì›Œí¬ì— í†µí•©í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. Matter BridgeëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:\n\ní”„ë¡œí† ì½œ ë³€í™˜: ì„œë¡œ ë‹¤ë¥¸ í”„ë¡œí† ì½œ ê°„ì˜ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ì—¬, ë¹„í˜¸í™˜ ì¥ì¹˜ë“¤ë„ Matter ë„¤íŠ¸ì›Œí¬ì—ì„œ ì œì–´ë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\ní†µí•© ê´€ë¦¬: ë‹¤ì–‘í•œ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ì¥ì¹˜ë“¤ì„ í•˜ë‚˜ì˜ í”Œë«í¼ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.\ní™•ì¥ì„±: ê¸°ì¡´ì˜ ìŠ¤ë§ˆíŠ¸ í™ˆ ì¥ì¹˜ë“¤ì„ íê¸°í•˜ì§€ ì•Šê³  Matter ë„¤íŠ¸ì›Œí¬ì— í†µí•©í•˜ì—¬ ì‚¬ìš©ìê°€ ë” ë§ì€ ì¥ì¹˜ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\n\n\n1.1.3 Thread\nThreadëŠ” ì €ì „ë ¥, ì €ë¹„ìš©, ë©”ì‹œ ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œë¡œ, ìŠ¤ë§ˆíŠ¸ í™ˆ ë° IoT ê¸°ê¸°ë“¤ ê°„ì˜ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ í†µì‹ ì„ ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ThreadëŠ” Matterì˜ ì£¼ìš” ë„¤íŠ¸ì›Œí¬ ê¸°ìˆ  ì¤‘ í•˜ë‚˜ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤:\n\në©”ì‹œ ë„¤íŠ¸ì›Œí¬: ëª¨ë“  ì¥ì¹˜ë“¤ì´ ì„œë¡œ ì—°ê²°ë˜ì–´ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ë©°, ë„¤íŠ¸ì›Œí¬ ë‚´ì˜ ì¥ì¹˜ í•˜ë‚˜ê°€ ê³ ì¥ë‚˜ë”ë¼ë„ ë‹¤ë¥¸ ê²½ë¡œë¥¼ í†µí•´ í†µì‹ ì„ ì§€ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì €ì „ë ¥: ë°°í„°ë¦¬ë¡œ êµ¬ë™ë˜ëŠ” ì¥ì¹˜ë“¤ë„ íš¨ìœ¨ì ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì €ì „ë ¥ ì„¤ê³„ê°€ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\në³´ì•ˆ: IP ê¸°ë°˜ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë†’ì€ ìˆ˜ì¤€ì˜ ë³´ì•ˆì„ ì œê³µí•˜ë©°, ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ëœ ëª¨ë“  ì¥ì¹˜ ê°„ì˜ ì•”í˜¸í™”ëœ í†µì‹ ì„ ì§€ì›í•©ë‹ˆë‹¤.\ní™•ì¥ì„±: ì—¬ëŸ¬ ì¥ì¹˜ë“¤ì´ ê°„í¸í•˜ê²Œ ë„¤íŠ¸ì›Œí¬ì— ì¶”ê°€ë  ìˆ˜ ìˆì–´, ëŒ€ê·œëª¨ ì„¤ì¹˜ì—ë„ ì í•©í•©ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ê°œë…ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ, MatterëŠ” ìŠ¤ë§ˆíŠ¸ í™ˆ í™˜ê²½ì—ì„œì˜ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•˜ê³ , ì œì¡°ì‚¬ì™€ ì‚¬ìš©ì ëª¨ë‘ì—ê²Œ ë” ë‚˜ì€ í˜¸í™˜ì„±ê³¼ í¸ì˜ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant</span>"
    ]
  },
  {
    "objectID": "homeassistant.html#í—ˆë¸Œ-m3",
    "href": "homeassistant.html#í—ˆë¸Œ-m3",
    "title": "1Â  í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant",
    "section": "1.2 í—ˆë¸Œ M3",
    "text": "1.2 í—ˆë¸Œ M3\n\nAqara ìŠ¤ë§ˆíŠ¸ í—ˆë¸Œ M3ëŠ” Aqaraì˜ ì²« ë²ˆì§¸ Thread ì§€ì› Border Routerë¡œ, Thread, Zigbee 3.0 ë° Bluetooth ì¥ì¹˜ë¥¼ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.\nìƒˆë¡­ê²Œ ì—…ê·¸ë ˆì´ë“œëœ Cross-LAN ë° Cross-HUB ê¸°ëŠ¥ì„ í†µí•´ ë¡œì»¬ ìë™í™”ì™€ Matterë¥¼ ì§€ì›í•˜ëŠ” ê°•ë ¥í•œ ìŠ¤ë§ˆíŠ¸ í™ˆ í—ˆë¸Œì…ë‹ˆë‹¤.\nARM 1Ghz ë“€ì–¼ ì½”ì–´ A7 ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ë°ì´í„° ì²˜ë¦¬ì™€ ìë™í™” ì œì–´ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n2.4GHzì™€ 5GHz ë“€ì–¼ ë°´ë“œ Wi-Fiì™€ RJ45 í¬íŠ¸ë¥¼ í†µí•œ ìœ ì„  ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë° PoE ì „ì› ê³µê¸‰ì„ ì§€ì›í•©ë‹ˆë‹¤. ì–´ëŒ‘í„°ë¥¼ í†µí•œ ì „ì› ê³µê¸‰ë¿ ì•„ë‹ˆë¼, USB C ì¸í„°í˜ì´ìŠ¤ì˜ ë°ì´í„° í†µì‹  ê¸°ëŠ¥ì„ í†µí•´ ë‹¤ë¥¸ ì£¼ë³€ ì¥ì¹˜ì™€ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê³ ì¶œë ¥ ì ì™¸ì„  ì†¡ì‹ ê¸°ê°€ ì „ë©´ì— 6ê°œ, ì¸¡ë©´ì— 4ê°œ íƒ‘ì¬ë˜ì–´ ë„“ì€ ê³µê°„ì—ì„œë„ ì ì™¸ì„  ì¥ì¹˜ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì—¬ëŸ¬ ëŒ€ì˜ ìŠ¤ë§ˆíŠ¸ í—ˆë¸Œ M3ë¥¼ ë™ì¼ ë„¤íŠ¸ì›Œí¬ì— êµ¬ì„±í•˜ë©´ ë„“ì€ ì˜ì—­ì—ì„œ ì•ˆì •ì ì¸ ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní—ˆë¸Œ ëŒ€ì²´ ê¸°ëŠ¥ ë•ë¶„ì— í—ˆë¸Œ í•˜ë‚˜ì— ë¬¸ì œê°€ ë°œìƒí•´ë„ ë‹¤ë¥¸ í—ˆë¸Œê°€ ì—­í• ì„ ëŒ€ì‹ í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n8GB eMMC ìŠ¤í† ë¦¬ì§€ë¥¼ ë‚´ì¥í•˜ì—¬ í´ë¼ìš°ë“œ ì˜ì¡´ë„ë¥¼ ë‚®ì¶”ê³  ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nìŠ¤ë§ˆíŠ¸ ì‹±ìŠ¤, ì• í”Œ í™ˆí‚·, êµ¬ê¸€í™ˆê³¼ Matter í‘œì¤€ í”„ë¡œí† ì½œì„ ì§€ì›í•˜ëŠ” ëª¨ë“  IoT í”Œë«í¼ê³¼ í˜¸í™˜ë©ë‹ˆë‹¤.\nM3ê°€ Matter Controllerë¡œ ì‚¬ìš©ë  ë•Œ ì§€ì› ê°€ëŠ¥í•œ 3rd party ë§¤í„°ê¸°ê¸°: íƒ€ì‚¬ ë§¤í„°ì§€ì› ì¥ì¹˜ ì¤‘ ì—´ë¦¼ê°ì§€ ì„¼ì„œ, ì¬ì‹¤ ì„¼ì„œ, ì¡°ë„ ì„¼ì„œ, ì¡°ëª…ìŠ¤ìœ„ì¹˜, ìŠ¤ë§ˆíŠ¸ í”ŒëŸ¬ê·¸, ì„œëª¨ìŠ¤íƒ¯, ë§¤í„° ë¸Œë¦¿ì§€ë§Œ ì—°ê²° ê°€ëŠ¥",
    "crumbs": [
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant</span>"
    ]
  },
  {
    "objectID": "homeassistant.html#home-assistant-ì—°ë™---í—ˆë¸Œ-m3ë¥¼-matter-bridge-ì—°ë™",
    "href": "homeassistant.html#home-assistant-ì—°ë™---í—ˆë¸Œ-m3ë¥¼-matter-bridge-ì—°ë™",
    "title": "1Â  í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant",
    "section": "1.3 Home Assistant ì—°ë™ - í—ˆë¸Œ M3ë¥¼ Matter Bridge ì—°ë™",
    "text": "1.3 Home Assistant ì—°ë™ - í—ˆë¸Œ M3ë¥¼ Matter Bridge ì—°ë™\n\n1.3.1 Home Assistant í™˜ê²½ êµ¬ì¶•\n\n2024ë…„ 7ì›” 1ì¼ í˜„ì¬ Matterë¥¼ ë¬¸ì œì—†ì´ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Home Assistantë¥¼ Supervised ëª¨ë“œë¡œ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\në³¸ ì‹¤í—˜ì€ Raspberry Pi 4 (8G)ì— Home Assistant Supervisedë¥¼ ì„¤ì¹˜í•˜ì—¬ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.\nRaspberry Pi Imager(https://www.raspberrypi.com/software/)ì„ ë‹¤ìš´ë¡œë“œí•˜ì‹  í›„ Raspberry Pi ëª¨ë¸ì„ ì§€ì •í•˜ê³  Home Assistant ì„ íƒí•˜ë©´ SDì¹´ë“œì— Home Assistant Supervisedê°€ ì„¤ì¹˜ë©ë‹ˆë‹¤.\nChoose OS &gt;&gt; Other specific-purpose OS &gt;&gt; Home assistants and home automation &gt;&gt; Home Assistant\nHome Assistant ëª¨ë°”ì¼ ë²„ì „(ì•ˆë“œë¡œì´ë“œ/iOS) ì„¤ì¹˜ ì¶”ì²œ - Home Assistant IPì™€ ë¡œê·¸ì¸ ì •ë³´ë§Œ ì…ë ¥í•˜ë©´ PCë²„ì „ê³¼ ë™ê¸°í™” ë©ë‹ˆë‹¤. ë§¤í„°ê¸°ê¸° ë“±ë¡ì‹œ QRì½”ë“œ ìŠ¤ìº”ì— ìš©ì´í•©ë‹ˆë‹¤.\n\n\n\n1.3.2 í—ˆë¸Œ M3ë¥¼ Home Assistantì— ë§¤í„°ê¸°ê¸°ë¡œ ë“±ë¡í•˜ê¸°\n\nHome Assistant ë©”ì¸ ë©”ë‰´ì—ì„œ â€œì„¤ì •â€ì„ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\n\n\n\n\nâ€œê¸°ê¸° ë° ì„œë¹„ìŠ¤â€ ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\n\n\n\n\nâ€œí†µí•©êµ¬ì„±ìš”ì†Œ ì¶”ê°€í•˜ê¸°â€ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\n\n\n\n\nâ€œMatter ê¸°ê¸° ì¶”ê°€â€ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.\n\n\n\n\n\n\n\nâ€œì•„ë‹ˆì˜¤, ìƒˆ ì œí’ˆì…ë‹ˆë‹¤â€ ì„ íƒí•˜ê¸°\n\n\n\n\n\n\n\nì•„ì¹´ë¼í™ˆì•±ì—ì„œ í—ˆë¸Œ M3ì˜ Matter í˜ì–´ë§ ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n\n\n\n\n\n\nìœ„ì—ì„œ ìƒì„±ëœ ì½”ë“œë¥¼ Home Assistantì˜ â€œMatter QR ì½”ë“œ ìŠ¤ìº”â€ë¥¼ í†µí•´ì„œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n\n\n\n\n\n\nHome Assistant ëŒ€ì‹œ ë³´ë“œ êµ¬ì„± í›„ â€œë‘˜ëŸ¬ë³´ê¸°â€ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤. í—ˆë¸Œ M3ì— ì—°ê²°ëœ ìŠ¤ë§ˆíŠ¸ ë„ì–´ë½ K100ë„ Home Assistantì— ìë™ ë“±ë¡ë©ë‹ˆë‹¤. Home Assistantì—ì„œ ë„ì–´ë½ K100 ì ê¸ˆí•´ì œ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n(ì°¸ê³ ) Home Assistantì— ì• í”Œí™ˆí‚· ì§€ì› G2H/G2H Pro, G3,ì¹´ë©”ë¼ E1ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œ â€œí†µí•©êµ¬ì„±ìš”ì†Œ ì¶”ê°€í•˜ê¸°â€ì—ì„œ Appleë¥¼ ê²€ìƒ‰í•˜ì‹  í›„ â€œHomeKit ê¸°ê¸°â€ë¡œ ë“±ë¡í•˜ì‹œë©´ ë©ë‹ˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant</span>"
    ]
  },
  {
    "objectID": "homeassistant.html#ìë™í™”-ì˜ˆì‹œ",
    "href": "homeassistant.html#ìë™í™”-ì˜ˆì‹œ",
    "title": "1Â  í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant",
    "section": "1.4 ìë™í™” ì˜ˆì‹œ",
    "text": "1.4 ìë™í™” ì˜ˆì‹œ\n\n1.4.1 ì‹œë‚˜ë¦¬ì˜¤\nì¹´ë©”ë¼ê°€ ì›€ì§ì„ì„ ê°ì§€í•˜ë©´ ìŠ¤ë§ˆíŠ¸ ë„ì–´ë½ K100 ì ê¸ˆ í•´ì œí•˜ê¸°\n\n\n1.4.2 ìë™í™” ì„¤ì • ë°©ë²•\n\nHome Assistantì˜ ì„¤ì • ë©”ë‰´ì—ì„œ â€œìë™í™” ë° ì¥ë©´â€ ì„ íƒí•˜ê¸°\n\n\n\n\n\n\n\nìë™í™” ì„¤ì •í•˜ê¸°\n\nì¡°ê±´: G2H ì¹´ë©”ë¼ê°€ ì›€ì§ì„ ê°ì§€í–ˆì„ ë•Œ\nìˆ˜í–‰: ìŠ¤ë§ˆíŠ¸ ë„ì–´ë½ K100 ì ê¸ˆí•´ì œ\n\n\n\n\n\n\n\n\n\n\n\n\n\nìë™í™” ìˆ˜í–‰ ê´€ë ¨ ë¡œê·¸ ì •ë³´",
    "crumbs": [
      "<span class='chapter-number'>1</span>Â  <span class='chapter-title'>í—ˆë¸Œ M3ì™€ ë§¤í„° - Home Assistant</span>"
    ]
  },
  {
    "objectID": "googlesheets.html",
    "href": "googlesheets.html",
    "title": "3Â  ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™",
    "section": "",
    "text": "3.1 ëª©ì ",
    "crumbs": [
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™</span>"
    ]
  },
  {
    "objectID": "googlesheets.html#ëª©ì ",
    "href": "googlesheets.html#ëª©ì ",
    "title": "3Â  ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™",
    "section": "",
    "text": "ë³¸ ë¬¸ì„œëŠ” ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ë°©ë²•ì„ ê¸°ìˆ í•œ ë¬¸ì„œì…ë‹ˆë‹¤.\nêµ¬ê¸€ ì‹œíŠ¸ ë¬¸ì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\nìˆ˜ê±° ì‹ ì²­ ëŒ€ì¥\ní† íƒˆì„¤ì¹˜_í”¼ì—˜ì´ì—”ì§€_ë°°ì •_2024í•˜ë°˜ê¸°\në§ì¶¤ì»¤íŠ¼_ì—˜ì— ì—‘ìŠ¤í…_ë°°ì •_2024í•˜ë°˜ê¸°\nì„¤ì¹˜ ì—…ì²´ ë°°ì •_í•˜ë°˜ê¸° (ë„ì–´ë½)\nK100 ë¶ˆëŸ‰ ë° ë¬¸ì˜ ì ‘ìˆ˜í‘œ_ì§„í–‰ì¤‘",
    "crumbs": [
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™</span>"
    ]
  },
  {
    "objectID": "googlesheets.html#ì¤€ë¹„-ì‚¬í•­",
    "href": "googlesheets.html#ì¤€ë¹„-ì‚¬í•­",
    "title": "3Â  ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™",
    "section": "3.2 ì¤€ë¹„ ì‚¬í•­",
    "text": "3.2 ì¤€ë¹„ ì‚¬í•­\n\nì°¸ê³  ì‚¬ì´íŠ¸: https://develop-davi-kr.tistory.com/entry/%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EA%B5%AC%EA%B8%80-%EC%8A%A4%ED%94%84%EB%A0%88%EB%93%9C%EC%8B%9C%ED%8A%B8-%EC%97%B0%EB%8F%99-%EB%B0%8F-%EC%9E%90%EB%8F%99%ED%99%94-%EB%B0%A9%EB%B2%95#google_vignette\n\n\n\nêµ¬ê¸€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ê°€ì… ë° ì„œë¹„ìŠ¤ ê³„ì • ìƒì„± (https://console.cloud.google.com/apis/dashboard)\n\nì‚¬ìš©ì ì¸ì¦ ì •ë³´ &gt;&gt; í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°\nì‚¬ì¥ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸° &gt;&gt; ì„œë¹„ìŠ¤ ê³„ì • ìƒì„±\nì„œë¹„ìŠ¤ ê³„ì •ì˜ ì´ë©”ì¼ ì •ë³´ í´ë¦­ &gt;&gt; í‚¤ ìƒì„±\në¹„ê³µê°œ í‚¤ë¥¼ ì»´í“¨í„°ì— ì €ì¥(jsoníŒŒì¼)\nì„œë¹„ìŠ¤ ê³„ì •ì— ìƒì„±ëœ ì´ë©”ì¼ì„ êµ¬ê¸€ì‹œíŠ¸ì—ì„œ ê³µìœ  ëŒ€ìƒìœ¼ë¡œ ì§€ì •\n\nêµ¬ê¸€ ì‹œíŠ¸ API ì—°ë™\n\nAPI ë° ì„œë¹„ìŠ¤ &gt;&gt; ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë¦­ &gt;&gt; Google Sheet ê²€ìƒ‰ &gt;&gt; Google Sheets API í´ë¦­ &gt;&gt; API ì‚¬ìš© í´ë¦­",
    "crumbs": [
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™</span>"
    ]
  },
  {
    "objectID": "googlesheets.html#ì½”ë“œ-ë¶„ì„",
    "href": "googlesheets.html#ì½”ë“œ-ë¶„ì„",
    "title": "3Â  ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™",
    "section": "3.3 ì½”ë“œ ë¶„ì„",
    "text": "3.3 ì½”ë“œ ë¶„ì„\n\n3.3.1 ê³µí†µ ì£¼ìš” ì •ë³´\n\n3.3.1.1 .env íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ\n#from dotenv import load_dotenv\n#import os\n#load_dotenv()\n\n\n3.3.1.2 Google Sheets API ì¸ì¦ ë° ë°ì´í„° ë¡œë“œ\n\nêµ¬ê¸€ ì‹œíŠ¸ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ID: â€œd/â€ì™€ â€œ/editâ€ì‚¬ì´ì˜ ë¬¸ì\n\nì˜ˆì œ&gt; https://docs.google.com/spreadsheets/d/xxxxxxxxxxxxxxxxxx/edit?gid=xxxxx#gid=xxxxxxxx\n\n\n#from google.oauth2.service_account import Credentials\n#import gspread\n# Path to your service account JSON file\n#SERVICE_ACCOUNT_FILE = os.getenv('SERVICE_ACCOUNT_FILE')\n\n# Load credentials from the JSON file\n#creds = Credentials.from_service_account_file(SERVICE_ACCOUNT_FILE, scopes=[os.getenv('SCOPES')])\n\n# Connect to Google Sheets\n#gc = gspread.authorize(creds)\n\n# Google Sheet ID and Worksheet name\n#SERVICE_SPREADSHEET_ID = os.getenv('SERVICE_SPREADSHEET_ID')\n#SERVICE_WORKSHEET_NAME = os.getenv('SERVICE_WORKSHEET_NAME')  # Replace with your worksheet name\n\nGoogle Sheets API ì¸ì¦: Google Sheets APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ JSON ìê²© ì¦ëª… íŒŒì¼ì„ í†µí•´ ì¸ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\ngspread ë¼ì´ë¸ŒëŸ¬ë¦¬: Google Sheetsì˜ ë°ì´í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ Python ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, authorize() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ Google Sheetsì— ì ‘ê·¼í•©ë‹ˆë‹¤.\n\n\n\n\n3.3.2 ìˆ˜ê±° ì‹ ì²­ ëŒ€ì¥\n\n3.3.2.1 êµ¬ê¸€ ì‹œíŠ¸ ë°ì´í„° ë¡œë”© ë° ì •ë¦¬\n#def load_sheet_data():\n#    worksheet = gc.open_by_key(SERVICE_SPREADSHEET_ID).worksheet(SERVICE_WORKSHEET_NAME)\n#    all_values = worksheet.get_all_values()\n#    headers = all_values[2]  # 3ë²ˆì§¸ ì¤„ì„ í—¤ë”ë¡œ ì‚¬ìš©\n#    data = all_values[3:]    # ë°ì´í„°ëŠ” 4ë²ˆì§¸ ì¤„ë¶€í„° ì‹œì‘\n#    df = pd.DataFrame(data, columns=headers)\n#    df.replace('', np.nan, inplace=True)\n#    df.dropna(subset=['ê³ ê°ëª…'], inplace=True)\n#    df.columns = make_unique_columns(list(df.columns))\n#    return df\n\n\nëª©ì : Google Sheetsì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ Pandas DataFrameìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\nì£¼ìš” ë™ì‘:\nâ€¢ ì²« ë‘ ì¤„ì„ ê±´ë„ˆë›°ê³ , 3ë²ˆì§¸ ì¤„ì„ í—¤ë”ë¡œ ì‚¬ìš©í•˜ë©° 4ë²ˆì§¸ ì¤„ë¶€í„° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.\nâ€¢ ë¹ˆ ë¬¸ìì—´ì„ NaNìœ¼ë¡œ ëŒ€ì²´í•˜ê³ , â€˜ê³ ê°ëª…â€™ ì—´ì´ ë¹„ì–´ìˆëŠ” í–‰ì€ ì œê±°í•©ë‹ˆë‹¤.\nâ€¢ make_unique_columns(): ì¤‘ë³µëœ ì—´ ì´ë¦„ì´ ìˆì„ ê²½ìš°, ì´ë¥¼ ê³ ìœ í•˜ê²Œ ë³€ê²½í•©ë‹ˆë‹¤.sk\n\n\n\n3.3.2.2 ë‚ ì§œ íŒŒì‹± ë° í˜•ì‹í™”\n#for idx, row in df.iterrows():\n#    date_str = row['ì‘ì„±ì¼']\n#    if pd.isna(date_str):\n#        continue\n#    try:\n#        if re.match(r'^\\d{4}\\.\\d{1,2}\\.\\d{1,2}$', date_str):\n#            df.at[idx, 'registered_date'] = pd.to_datetime(date_str, format='%Y.%m.%d')\n# ì¶”ê°€ì ì¸ ì •ê·œ í‘œí˜„ì‹ íŒ¨í„´ë“¤\n#    except Exception as e:\n#        df.at[idx, 'registered_date'] = None\n\nëª©ì : ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì„ í‘œì¤€í™”ëœ ë‚ ì§œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\nâ€¢ ì •ê·œ í‘œí˜„ì‹ ë§¤ì¹­: ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì„ re.match()ë¡œ íƒì§€í•œ í›„, ì´ë¥¼ pd.to_datetime()ì„ ì‚¬ìš©í•´ ë³€í™˜í•©ë‹ˆë‹¤.\nâ€¢ ì˜¤ë¥˜ ì²˜ë¦¬: ë§Œì•½ ë³€í™˜ì— ì‹¤íŒ¨í•˜ê±°ë‚˜ í˜•ì‹ì´ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ë‚ ì§œë¥¼ Noneìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n\n\n\n3.3.3 í† íƒˆ ì„¤ì¹˜ ì„œë¹„ìŠ¤\n\n3.3.3.1 Pandas DataFrameìœ¼ë¡œ ë°ì´í„° ì²˜ë¦¬\n#df = pd.DataFrame(data[2:], columns=[\n#    'registered_date', 'ì¶œê³ ë‚ ì§œ', 'ê³ ê°ëª…', 'ì—°ë½ì²˜', 'ì£¼ë¬¸ë²ˆí˜¸', 'ì£¼ì†Œ', 'êµ¬ë§¤í’ˆëª©',\n#    'ë„ì–´ë½', 'ë„ì–´ë²¨', 'ì¡°ëª…ìŠ¤ìœ„ì¹˜', 'ì»¤íŠ¼', 'ë‚´ìš©í™•ì¸', 'ê¸°ì‚¬ë‹˜ì„±í•¨', 'í•´í”¼ì½œì˜ˆì •ì¼', \n#    'ì„¤ì¹˜ì˜ˆì •ì¼', 'ì„¤ì¹˜ì™„ë£Œì—¬ë¶€', 'ìœ ìƒ', 'ë¹„ê³ _ì•„ì¹´ë¼', 'ë¹„ê³ _í”¼ì—˜'\n#])\n\nëª©ì : Google Sheetsì—ì„œ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ Pandas DataFrameìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\nì»¬ëŸ¼ ì§€ì •: 3ë²ˆì§¸ í–‰ë¶€í„° ë°ì´í„°ë¥¼ ì½ê³ , ì»¬ëŸ¼ì„ ìˆ˜ë™ìœ¼ë¡œ ì§€ì •í•´ DataFrameì„ êµ¬ì„±í•©ë‹ˆë‹¤.\n\n\n\n3.3.3.2 ë°ì´í„° í˜•ì‹ ë³€í™˜ ë° ì²˜ë¦¬\n\në‚ ì§œ ë³€í™˜: ë‚ ì§œ í˜•ì‹ì˜ ë°ì´í„°ë¥¼ pd.to_datetime()ì„ ì‚¬ìš©í•´ ë³€í™˜í•˜ë©°, ë³€í™˜ì´ ë¶ˆê°€ëŠ¥í•œ ê°’ì€ NaTë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n#df['registered_date'] = pd.to_datetime(df['registered_date'], errors='coerce')\n#df['ì¶œê³ ë‚ ì§œ'] = pd.to_datetime(df['ì¶œê³ ë‚ ì§œ'], errors='coerce')\n#df['í•´í”¼ì½œì˜ˆì •ì¼'] = pd.to_datetime(df['í•´í”¼ì½œì˜ˆì •ì¼'], errors='coerce')\n#df['ì„¤ì¹˜ì˜ˆì •ì¼'] = pd.to_datetime(df['ì„¤ì¹˜ì˜ˆì •ì¼'], errors='coerce')\n\nìˆ«ìí˜• ë³€í™˜\n\n#boolean_columns = ['ë‚´ìš©í™•ì¸', 'ì„¤ì¹˜ì™„ë£Œì—¬ë¶€']\n#for col in boolean_columns:\n#    df[col] = df[col].apply(lambda x: True if x.lower() == 'true' else False)\n\në¶ˆë¦¬ì–¸ ê°’ ì²˜ë¦¬: ë¶ˆë¦¬ì–¸ ê°’ì„ ì²˜ë¦¬í•´ â€˜trueâ€™ ê°’ì„ Trueë¡œ, ê·¸ ì™¸ ê°’ì„ Falseë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n\n\n\n\n3.3.4 ë§ì¶¤í˜• ì»¤íŠ¼ ì„¤ì¹˜\n\n3.3.4.1 ë°ì´í„° ì „ì²˜ë¦¬\n#data = [row[:17] for row in data]\n#header = data[0]\n#df = pd.DataFrame(data[1:], columns=header)\n\n#df.rename(columns={'665': 'í”Œë«í¼', 'ë‚ ì§œ': 'registered_date'}, inplace=True)\n#df = df[df['í”Œë«í¼'].notna() & df['í”Œë«í¼'].str.strip().astype(bool) &\n#        df['ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸'].notna() & df['ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸'].str.strip().astype(bool) &\n#        (df['ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸'] != 'ë³¸ì‚¬ ì´¬ì˜ìš©')]\n\n#df.reset_index(drop=True, inplace=True)\n\në°ì´í„° ì „ì²˜ë¦¬: ë¶ˆí•„ìš”í•œ ì»¬ëŸ¼ì„ ì œì™¸í•˜ê³  ì²« 17ê°œì˜ ì»¬ëŸ¼ë§Œ ì„ íƒí•©ë‹ˆë‹¤.\nì»¬ëŸ¼ëª… ë³€ê²½: â€™665â€™ë¼ëŠ” ì»¬ëŸ¼ëª…ì„ â€™í”Œë«í¼â€™ìœ¼ë¡œ, â€™ë‚ ì§œâ€™ë¼ëŠ” ì»¬ëŸ¼ëª…ì„ â€™registered_dateâ€™ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.\ní•„í„°ë§: â€˜í”Œë«í¼â€™ê³¼ â€˜ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸â€™ê°€ ë¹„ì–´ ìˆì§€ ì•Šì€ í–‰ë§Œ í•„í„°ë§í•˜ê³ , â€˜ë³¸ì‚¬ ì´¬ì˜ìš©â€™ ë°ì´í„°ë¥¼ ì œì™¸í•©ë‹ˆë‹¤.\nì¸ë±ìŠ¤ ì´ˆê¸°í™”: ë¶ˆí•„ìš”í•œ ì¸ë±ìŠ¤ë¥¼ ì œê±°í•˜ê³  ìƒˆë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n\n\n3.3.4.2 ë‚ ì§œ ì²˜ë¦¬\n#def adjust_year(date_str, index):\n#    try:\n#        date_obj = datetime.strptime(date_str, \"%m/%d\")\n#    except ValueError:\n#        return None\n    \n#    if index &lt;= 262:\n#        return date_obj.replace(year=2023)\n#    else:\n#        return date_obj.replace(year=2024)\n\n#df['registered_date'] = df.apply(lambda row: adjust_year(row['registered_date'], row.name), #axis=1)\n\në‚ ì§œ ì¡°ì •: ë‚ ì§œê°€ â€œì›”/ì¼â€ í˜•ì‹ì¼ ë•Œ í•´ë‹¹í•˜ëŠ” ì—°ë„ë¥¼ ì¸ë±ìŠ¤ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì„¤ì •í•©ë‹ˆë‹¤.\nì¸ë±ìŠ¤ê°€ 262 ì´í•˜ì¼ ê²½ìš° 2023ë…„, ê·¸ ì™¸ì—ëŠ” 2024ë…„ìœ¼ë¡œ ì—°ë„ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n\n\n\n\n3.3.5 ë„ì–´ë½ ì„¤ì¹˜ì—…ì²´ ë°°ì •\n\n3.3.5.1 ë°ì´í„° ì „ì²˜ë¦¬\n#df = pd.DataFrame(data[1:])\n#df = df.iloc[:,1:22]\n#required_columns =[\n#    'registered_date', 'ì£¼ë¬¸ì²˜', 'ì§€ì—­1', 'ì§€ì—­2', 'ì§€ì ', 'ì„¤ì¹˜', 'ê¸°ì‚¬ì—°ë½ì²˜', 'ë¹„ìš©', #'ì²­êµ¬ì›”', 'ì¦ë¹™ìœ í˜•', \n#    'ì¶”ê°€ë¹„ìš©', 'ì²­êµ¬ì›”2', 'ì§€ê¸‰ê¸°ì•ˆ', 'ì„¤ì¹˜ì—¬ë¶€', 'ì´ë¦„', 'ì—°ë½ì²˜', 'ì£¼ì†Œ', 'ìƒí’ˆëª…', #'ìƒí’ˆì˜µì…˜', 'ë°°ì†¡ë©”ì‹œì§€', 'íŠ¹ì´ì‚¬í•­'\n#]\n#df.columns = required_columns\n\në°ì´í„° í”„ë ˆì„ ìƒì„±: Google Sheetsì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ Pandas DataFrameìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\ní•„ìš”í•œ ì»¬ëŸ¼ ì„¤ì •: í•„ìš”í•œ 21ê°œì˜ ì—´ì„ ì„ íƒí•˜ê³ , ì»¬ëŸ¼ ì´ë¦„ì„ ì ì ˆí•˜ê²Œ ì„¤ì •í•©ë‹ˆë‹¤.\n\n\n\n3.3.5.2 ë‚ ì§œ í˜•ì‹ ë³€í™˜\n#def parse_registered_date(date_str):\n#    date_formats = ['%Y/ %m/ %d', '%Y/%m/%d', '%Y. %m. %d','%Y. %m.%d']\n#    for date_format in date_formats:\n#        try:\n#            return pd.to_datetime(date_str, format=date_format, errors='raise')\n#        except (ValueError, TypeError):\n#            continue\n#    return None\n#df['registered_date'] = df['registered_date'].apply(parse_registered_date)\n\nparse_registered_date() í•¨ìˆ˜: ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì—¬ëŸ¬ ë‚ ì§œ í¬ë§·ì„ ì‹œë„í•˜ì—¬ ë¬¸ìì—´ì„ datetime í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n\n\n\n3.3.5.3 ë¹„ìš© ê°’ ì²˜ë¦¬\n#def clean_cost_value(value):\n#    if isinstance(value, str):\n#        cleaned_value = value.replace('â‚©', '').replace(',', '')\n#        if cleaned_value.isdigit():\n#            return float(cleaned_value)\n#        else:\n#            return None\n#    return None if pd.isna(value) else value\n\në¹„ìš© ê°’ ì²˜ë¦¬: â€˜â‚©â€™ ë° â€™,â€™ë¥¼ ì œê±°í•˜ê³ , ìˆ«ìë¡œ ë³€í™˜ ê°€ëŠ¥í•œ ê°’ì„ float í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ê°’ì´ ìˆ«ìê°€ ì•„ë‹ˆë©´ Noneìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n\n\n\n3.3.6 ë„ì–´ë½ ì„¤ì¹˜ íŒŒíŠ¸ë„ˆ\n\n3.3.6.1 ë°ì´í„° ì „ì²˜ë¦¬\n# Add 'registered_date' column\n#registered_date = pd.to_datetime('2024.02.19')\n#df.insert(0, 'registered_date', registered_date)\n\n# ì»¬ëŸ¼ëª… ì„¤ì •\n#required_columns = ['registered_date', 'ì§€ì—­1', 'ì§€ì—­2', 'ëŒ€ë¦¬ì ', 'ë‹´ë‹¹ìì½”ë“œ', 'ëŒ€í‘œ', #'ì—°ë½ì²˜', 'ì£¼ì†Œ', 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸', 'ì€í–‰', 'ê³„ì¢Œ', 'ì†Œìœ ìëª…', 'ì„¸ê¸ˆê³„ì‚°ì„œ', 'í”Œë¼ì', #'ê¸°íƒ€']\n#df.columns = required_columns\n\n# 'ì—°ë½ì²˜'ê°€ ì—†ëŠ” í–‰ ì œê±° ë° NaN ê°’ì„ Noneìœ¼ë¡œ ë³€í™˜\n#df['ì—°ë½ì²˜'] = df['ì—°ë½ì²˜'].replace(r'^\\s*$', np.nan, regex=True)\n#df = df.dropna(subset=['ì—°ë½ì²˜'])\n#df = df.replace({np.nan: None})\n\në“±ë¡ ë‚ ì§œ(registered_date)ë¥¼ íŠ¹ì • ë‚ ì§œë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.\ní•„ìš”í•œ ì»¬ëŸ¼ì„ ì§€ì •í•˜ê³  ë°ì´í„° ì •ë¦¬ ë° ë¹ˆ ì¹¸ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\nNaN ê°’ì„ Pythonì˜ None ê°’ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ SQL ì‚½ì… ì‹œ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.\n\n\n\n\n3.3.7 ë„ì–´ë½ ë¶ˆëŸ‰ ë“±ë¡\n\n3.3.7.1 Pandas DataFrame ìƒì„±\n#data = sheet.get_all_values()\n#df = pd.DataFrame(data[6:])  # ë°ì´í„°ëŠ” 7ë²ˆì§¸ í–‰ë¶€í„° ì‹œì‘\n#df = df.iloc[:, 2:14]  # 3ë²ˆì§¸ ì—´ë¶€í„° 14ë²ˆì§¸ ì—´ê¹Œì§€ ì‚¬ìš©\n#df.columns = required_columns  # í•„ìˆ˜ ì—´ ì„¤ì •\n\nGoogle Sheetsì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ Pandas DataFrameìœ¼ë¡œ ë³€í™˜í•˜ê³ , í•„ìš”í•œ ì—´ë§Œ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n\n\n3.3.7.2 ë°ì´í„° ì „ì²˜ë¦¬\n#df['registered_date'] = pd.to_datetime(df['registered_date'], errors='coerce')\n#df = df.replace(\"\", None)\n#df = df.dropna(subset=['ê³ ê°ëª…', 'ê³ ê°ë¶ˆëŸ‰ì¦ìƒ'], how='all')\n\në‚ ì§œ í˜•ì‹ì„ ë³€í™˜í•˜ê³ , ë¹ˆ ë¬¸ìì—´ì„ Noneìœ¼ë¡œ ë°”ê¾¸ë©°, ê³ ê°ëª…ê³¼ ê³ ê°ë¶ˆëŸ‰ì¦ìƒì´ ë¹„ì–´ ìˆëŠ” í–‰ì€ ì‚­ì œí•©ë‹ˆë‹¤.\n\n\n\n\n3.3.8",
    "crumbs": [
      "<span class='chapter-number'>3</span>Â  <span class='chapter-title'>ê³ ê° ì„œë¹„ìŠ¤ ì—…ë¬´ ê´€ë ¨ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™</span>"
    ]
  },
  {
    "objectID": "ollama.html",
    "href": "ollama.html",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "",
    "text": "4.1 ê°œìš”\nì´ ë¬¸ì„œëŠ” Streamlit, MySQL ë°ì´í„°ë² ì´ìŠ¤, LangChainê³¼ Ollama LLMì„ ê²°í•©í•˜ì—¬ ì‚¬ìš©ìê°€ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” AI ê¸°ë°˜ ì±—ë´‡ì„ êµ¬í˜„í•œ ì½”ë“œì— ëŒ€í•œ ì„¤ëª…ì„ ì œê³µí•œë‹¤.\nCS ì—…ë¬´ì™€ ê´€ë ¨ëœ ëª¨ë“  êµ¬ê¸€ì‹œíŠ¸ì™€ ì•„ì¹´ë¼ ì¹´í˜ì˜ ë‚´ìš©ì„ MySQL DBì— ë°ì´í„°ë² ì´ìŠ¤í™” í•˜ì˜€ë‹¤.\níŒŒì¼ ë˜ëŠ” ì›¹ì‚¬ì´íŠ¸ ê¸°ë°˜ìœ¼ë¡œ RAGì„ ì§„í–‰í•  ìˆ˜ ìˆìœ¼ë‚˜ ìµœì¢… ëª©ì ì€ DBì˜ ë‚´ìš© ê¸°ë°˜ìœ¼ë¡œ RAGí•˜ëŠ” ê²ƒì´ë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ollama-ì„¤ì •-ë°©ë²•",
    "href": "ollama.html#ollama-ì„¤ì •-ë°©ë²•",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.2 OLLAMA ì„¤ì • ë°©ë²•",
    "text": "4.2 OLLAMA ì„¤ì • ë°©ë²•\n\n4.2.1 HuggingFaxe-Hub ì„¤ì¹˜\n#pip install huggingface-hub\n\n\n\n4.2.2 GGUFíŒŒì¼ ë‹¤ìš´ë¡œë“œ\nhttps://huggingface.co/heegyu/EEVE-Korean-Instruct-10.8B-v1.0-GGUF\n#huggingface-cli download \\\n#  heegyu/EEVE-Korean-Instruct-10.8B-v1.0-GGUF \\\n#  ggml-model-Q5_K_M.gguf \\\n#  --local-dir ë³¸ì¸ì˜_ì»´í“¨í„°_ë‹¤ìš´ë¡œë“œí´ë”_ê²½ë¡œ \\\n#  --local-dir-use-symlinks False\n\n\n4.2.3 Modelfile\nEEVE-Korean-Instruct-10.8B-v1.0 ì˜ˆì‹œ\n\n#FROM ggml-model-Q5_K_M.gguf\n#\n#TEMPLATE \"\"\"{{- if .System }}\n#&lt;s&gt;{{ .System }}&lt;/s&gt;\n#{{- end }}\n#&lt;s&gt;Human:\n#{{ .Prompt }}&lt;/s&gt;\n#&lt;s&gt;Assistant:\n#\"\"\"\n#\n#SYSTEM \"\"\"A chat between a curious user and an artificial intelligence assistant. The #assistant gives helpful, detailed, and polite answers to the user's questions.\"\"\"\n#\n#PARAMETER stop &lt;s&gt;\n#PARAMETER stop &lt;/s&gt;\n\n\n4.2.4 OLLAMA ì‹¤í–‰\n#ollama create EEVE-Korean-10.8B -f EEVE-Korean-Instruct-10.8B-v1.0-GGUF/Modelfile\n\n4.2.4.1 OLLAMA ëª¨ë¸ ëª©ë¡\n#ollama list\n\n\n4.2.4.2 OLLAMA ëª¨ë¸ ì‹¤í–‰\nollama run EEVE-Korean-10.8B:latest\n\n\n4.2.4.3 ngrokì—ì„œ í„°ë„ë§(í¬íŠ¸ í¬ì›Œë“œ)\n#streamlit default port: 8501\n#ngrok http localhost:8501",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#í™˜ê²½-ì„¤ì •-ë°-streamlit-í˜ì´ì§€-êµ¬ì„±",
    "href": "ollama.html#í™˜ê²½-ì„¤ì •-ë°-streamlit-í˜ì´ì§€-êµ¬ì„±",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.3 í™˜ê²½ ì„¤ì • ë° Streamlit í˜ì´ì§€ êµ¬ì„±",
    "text": "4.3 í™˜ê²½ ì„¤ì • ë° Streamlit í˜ì´ì§€ êµ¬ì„±\nfrom dotenv import load_dotenv\nload_dotenv()\n\n.env íŒŒì¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë¡œë“œí•˜ì—¬ ì½”ë“œì—ì„œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.\n\nst.set_page_config(page_title=\"MySQL DB GPT\", page_icon=\"ğŸ”’\", layout=\"wide\")\n\nStreamlit í˜ì´ì§€ì˜ ì œëª©ê³¼ ì•„ì´ì½˜, ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#chatcallbackhandler",
    "href": "ollama.html#chatcallbackhandler",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.4 ChatCallbackHandler",
    "text": "4.4 ChatCallbackHandler\n# Custom callback handler inheriting from BaseCallbackHandler\nclass ChatCallbackHandler(BaseCallbackHandler):\n    message = \"\"\n\n    def on_llm_start(self, *args, **kwargs):\n        self.message_box = st.empty()\n\n    def on_llm_end(self, *args, **kwargs):\n        save_message(self.message, \"ai\")\n\n    def on_llm_new_token(self, token, *args, **kwargs):\n        self.message += token\n        self.message_box.markdown(self.message)\n\nLangChainì˜ ì½œë°± í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì±—ë´‡ì˜ ì‹¤ì‹œê°„ ì‘ë‹µì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë©”ì‹œì§€ë¥¼ ì €ì¥í•˜ê³  ì—…ë°ì´íŠ¸í•˜ë©°, ì‹¤ì‹œê°„ìœ¼ë¡œ í† í°ì´ ìƒì„±ë  ë•Œë§ˆë‹¤ ì‚¬ìš©ìì—ê²Œ í‘œì‹œí•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ollama-llm-ì„¤ì •",
    "href": "ollama.html#ollama-llm-ì„¤ì •",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.5 Ollama LLM ì„¤ì •",
    "text": "4.5 Ollama LLM ì„¤ì •\nllm = ChatOllama(\n    model=\"EEVE-Korean-10.8B:latest\",\n    temperature=0.1,\n    streaming=True,\n    callbacks=[ChatCallbackHandler()],\n)\n\nOllamaì˜ â€œEEVE-Korean-10.8Bâ€ ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€í•œë‹¤.\ntemperature=0.1: ëª¨ë¸ì˜ ì‘ë‹µì´ ì–¼ë§ˆë‚˜ ì°½ì˜ì ì¸ì§€ ì¡°ì •í•œë‹¤.\nstreaming=True: ëª¨ë¸ì˜ ì¶œë ¥ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°ë˜ì–´ ì‚¬ìš©ìì—ê²Œ ì¦‰ì‹œ í‘œì‹œëœë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#mysql-í…Œì´ë¸”-ë¶ˆëŸ¬ì˜¤ê¸°",
    "href": "ollama.html#mysql-í…Œì´ë¸”-ë¶ˆëŸ¬ì˜¤ê¸°",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.6 MySQL í…Œì´ë¸” ë¶ˆëŸ¬ì˜¤ê¸°",
    "text": "4.6 MySQL í…Œì´ë¸” ë¶ˆëŸ¬ì˜¤ê¸°\ndef load_database_data(tables):\n    try:\n        connection = mysql.connector.connect(\n            host=db_host,\n            database=db_database,\n            user=db_user,\n            password=db_password,\n            charset='utf8mb4',\n            collation='utf8mb4_unicode_ci'\n        )\n\n        data_frames = {}\n        for table in tables:\n            query = f\"SELECT * FROM {table}\"\n            df = pd.read_sql(query, connection)\n            data_frames[table] = df\n\n        return data_frames\n\n    except mysql.connector.Error as err:\n        st.error(f\"Error connecting to MySQL: {err}\")\n        return None\n    finally:\n        if connection.is_connected():\n            connection.close()\n\nMySQL ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ìê°€ ì„ íƒí•œ í…Œì´ë¸” ë°ì´í„°ë¥¼ Pandas DataFrameìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤. ì´ ë°ì´í„°ëŠ” AIì—ê²Œ ì œê³µë  â€œì»¨í…ìŠ¤íŠ¸â€ë¡œ ì‚¬ìš©ëœë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ë°ì´í„°-í…Œì´ë¸”-ì„ íƒ-ë°-ë¡œë“œ",
    "href": "ollama.html#ë°ì´í„°-í…Œì´ë¸”-ì„ íƒ-ë°-ë¡œë“œ",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.7 ë°ì´í„° í…Œì´ë¸” ì„ íƒ ë° ë¡œë“œ",
    "text": "4.7 ë°ì´í„° í…Œì´ë¸” ì„ íƒ ë° ë¡œë“œ\ndef table_selector():\n    available_tables = [\"aqara_cafe\", \"cs_table\", \"doorlock_malfunction_ledger\", \"curtain_ledger\", \"installation_ledger\", \"service_ledger\"]\n    selected_tables = st.sidebar.multiselect(\"Select tables to load\", available_tables, default=available_tables)\n    \n    load_button = st.sidebar.button(\"Load selected tables\")\n    \n    if load_button:\n        data_frames = load_database_data(selected_tables)\n        st.session_state[\"data_frames\"] = data_frames\n        st.success(f\"Loaded data for tables: {', '.join(selected_tables)}\")\n\n    return st.session_state.get(\"data_frames\", {})\n\nì‚¬ìš©ìê°€ MySQL ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¶ˆëŸ¬ì˜¬ í…Œì´ë¸”ì„ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•œë‹¤. Streamlitì˜ multiselect ìœ„ì ¯ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ í…Œì´ë¸”ì„ ì„ íƒí•˜ê³ , ê·¸ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ì—¬ session stateì— ì €ì¥í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ì°¸ê³ -1-file-embedding-í•˜ê¸°",
    "href": "ollama.html#ì°¸ê³ -1-file-embedding-í•˜ê¸°",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.8 (ì°¸ê³  1) File Embedding í•˜ê¸°",
    "text": "4.8 (ì°¸ê³  1) File Embedding í•˜ê¸°\ndef embed_file(file):\n    # Define the directory path\n    directory = \"./private_files/\"\n    \n    # Create the directory if it does not exist\n    if not os.path.exists(directory):\n        os.makedirs(directory)\n    \n    # Save the file to the directory\n    file_path = os.path.join(directory, file.name)\n    \n    with open(file_path, \"wb\") as f:\n        f.write(file.read())\n    \n    cache_dir = LocalFileStore(f\"./private_embeddings/{file.name}\")\n    splitter = CharacterTextSplitter.from_tiktoken_encoder(\n        separator=\"\\n\",\n        chunk_size=600,\n        chunk_overlap=100,\n    )\n    \n    loader = UnstructuredFileLoader(file_path)\n    docs = loader.load_and_split(text_splitter=splitter)\n    \n    embeddings = OllamaEmbeddings(model=\"EEVE-Korean-10.8B:latest\")\n    cached_embeddings = CacheBackedEmbeddings.from_bytes_store(embeddings, cache_dir)\n    \n    vectorstore = FAISS.from_documents(docs, cached_embeddings)\n    retriever = vectorstore.as_retriever()\n    \n    return retriever",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ì°¸ê³ -2-webpage-embedding-í•˜ê¸°",
    "href": "ollama.html#ì°¸ê³ -2-webpage-embedding-í•˜ê¸°",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.9 (ì°¸ê³  2) Webpage Embedding í•˜ê¸°",
    "text": "4.9 (ì°¸ê³  2) Webpage Embedding í•˜ê¸°\n# Function to scrape website pages and extract text\ndef scrape_website(url):\n    visited_urls = set()\n    base_url = url\n    texts = []\n\n    def scrape_page(current_url):\n        if current_url in visited_urls or not current_url.startswith(base_url):\n            return\n        visited_urls.add(current_url)\n\n        # Request the page\n        response = requests.get(current_url)\n        soup = BeautifulSoup(response.content, \"html.parser\")\n\n        # Extract text from the page\n        page_text = soup.get_text(separator=\"\\n\").strip()\n        texts.append(page_text)\n\n        # Find all links on the page and recursively scrape them\n        for link in soup.find_all(\"a\", href=True):\n            absolute_link = requests.compat.urljoin(base_url, link['href'])\n            if absolute_link not in visited_urls:\n                scrape_page(absolute_link)\n\n    scrape_page(base_url)\n    return texts",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ëŒ€í™”-ê¸°ë¡-ì €ì¥-ë°-í‘œì‹œ",
    "href": "ollama.html#ëŒ€í™”-ê¸°ë¡-ì €ì¥-ë°-í‘œì‹œ",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.10 ëŒ€í™” ê¸°ë¡ ì €ì¥ ë° í‘œì‹œ",
    "text": "4.10 ëŒ€í™” ê¸°ë¡ ì €ì¥ ë° í‘œì‹œ\n# Function to save the conversation history\ndef save_message(message, role):\n    if \"messages\" not in st.session_state:\n        st.session_state[\"messages\"] = []\n    st.session_state[\"messages\"].append({\"message\": message, \"role\": role})\n\nStreamlitì˜ session stateë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì™€ AI ê°„ì˜ ëŒ€í™” ê¸°ë¡ì„ ì €ì¥í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ë„ ëŒ€í™” ê¸°ë¡ì´ ìœ ì§€ë˜ë„ë¡ í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ì§ˆë¬¸ê³¼-ë°ì´í„°-ê¸°ë°˜-ì‘ë‹µ-ì²˜ë¦¬",
    "href": "ollama.html#ì§ˆë¬¸ê³¼-ë°ì´í„°-ê¸°ë°˜-ì‘ë‹µ-ì²˜ë¦¬",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.11 ì§ˆë¬¸ê³¼ ë°ì´í„° ê¸°ë°˜ ì‘ë‹µ ì²˜ë¦¬",
    "text": "4.11 ì§ˆë¬¸ê³¼ ë°ì´í„° ê¸°ë°˜ ì‘ë‹µ ì²˜ë¦¬\nprompt = ChatPromptTemplate.from_template(\n    \"\"\"Answer the question using ONLY the following context and not your training data.\n    If you don't know the answer just say you don't know. DON'T make anything up.\n    \n    Context: {context}\n    Question: {question}\n    \"\"\"\n)\n\nLangChainì˜ ChatPromptTemplateì„ ì‚¬ìš©í•˜ì—¬ AIê°€ í›ˆë ¨ ë°ì´í„°ê°€ ì•„ë‹Œ, ì œê³µëœ ë°ì´í„°(ì»¨í…ìŠ¤íŠ¸)ë¥¼ ê¸°ë°˜ìœ¼ë¡œë§Œ ì§ˆë¬¸ì— ë‹µë³€í•˜ë„ë¡ í•œë‹¤.\n\nmessage = st.chat_input(\"Ask anything about your database...\")\n...\nchain = (\n    {\n        \"context\": RunnableLambda(lambda _: context),\n        \"question\": RunnablePassthrough(),\n    }\n    | prompt\n    | llm\n)\nwith st.chat_message(\"ai\"):\n    chain.invoke(message)\n\nì‚¬ìš©ìì˜ ì§ˆë¬¸ì„ ì…ë ¥ë°›ê³ , ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ì»¨í…ìŠ¤íŠ¸ì™€ í•¨ê»˜ AIì—ê²Œ ì „ë‹¬í•˜ì—¬ ë‹µë³€ì„ ìƒì„±í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "ollama.html#ì „ì²´-ì›Œí¬í”Œë¡œìš°",
    "href": "ollama.html#ì „ì²´-ì›Œí¬í”Œë¡œìš°",
    "title": "4Â  Local LLM - OLLAMA",
    "section": "4.12 ì „ì²´ ì›Œí¬í”Œë¡œìš°",
    "text": "4.12 ì „ì²´ ì›Œí¬í”Œë¡œìš°\n\nì‚¬ìš©ìëŠ” MySQL ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ì„ íƒí•œë‹¤..\nì„ íƒëœ ë°ì´í„°ê°€ Pandas DataFrameìœ¼ë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤..\nì‚¬ìš©ìê°€ ì§ˆë¬¸ì„ ì…ë ¥í•˜ë©´, AIê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹µë³€ì„ ì œê³µí•œë‹¤.\nëŒ€í™” ê¸°ë¡ì´ ìœ ì§€ë˜ë©°, ì´ì „ ëŒ€í™” ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>4</span>Â  <span class='chapter-title'>Local LLM - OLLAMA</span>"
    ]
  },
  {
    "objectID": "database.html",
    "href": "database.html",
    "title": "5Â  Database - MySQL",
    "section": "",
    "text": "5.1 ê°œìš”\nCS ì‘ì—… ê´€ë ¨ ëª¨ë“  êµ¬ê¸€ì‹œíŠ¸, ì•„ì¹´ë¼ ì¹´í˜, ê¸°ìˆ ì§€ì› ë‚´ì—­ì„ MySQL DBì— ë°ì´í„° ë² ì´ìŠ¤í™” í•˜ì˜€ë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>Database - MySQL</span>"
    ]
  },
  {
    "objectID": "database.html#db-schema",
    "href": "database.html#db-schema",
    "title": "5Â  Database - MySQL",
    "section": "5.2 DB Schema",
    "text": "5.2 DB Schema\nDatabase: cs\n\n\n\n\n\n\n5.2.1 ì•„ì¹´ë¼ ì¹´í˜\n\n\n\n\n\n\n\n5.2.2 ê¸°ìˆ  CS ì—…ë¬´\n\n\n\n\n\n\n\n5.2.3 ìˆ˜ê±° ì‹ ì²­ ëŒ€ì¥\n\n\n\n\n\n\n\n5.2.4 ì»¤íŠ¼/ë¸”ë¼ì¸ë“œ ì„¤ì¹˜\n\n\n\n\n\n\n\n5.2.5 ë„ì–´ë½ ì„¤ì¹˜ê¸°ì‚¬ ë°°ì •\n\n\n\n\n\n\n\n5.2.6 ë„ì–´ë½ ì„¤ì¹˜ íŒŒíŠ¸ë„ˆ\n\n\n\n\n\n\n\n5.2.7 ë„ì–´ë½ ë¶ˆëŸ‰ ëŒ€ì¥\n\n\n\n\n\n\n\n5.2.8 ì—…ë¬´ì¼ì§€",
    "crumbs": [
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>Database - MySQL</span>"
    ]
  },
  {
    "objectID": "database.html#mysql-í…Œì´ë¸”-ìƒì„±-ë°©ë²•",
    "href": "database.html#mysql-í…Œì´ë¸”-ìƒì„±-ë°©ë²•",
    "title": "5Â  Database - MySQL",
    "section": "5.3 MySQL í…Œì´ë¸” ìƒì„± ë°©ë²•",
    "text": "5.3 MySQL í…Œì´ë¸” ìƒì„± ë°©ë²•\në„ì–´ë½ ì„¤ì¹˜ ê¸°ì‚¬ ë°°ì • í…Œì´ë¸” ì˜ˆì œ\n#CREATE TABLE doorlock_installation_ledger (\n#    id INT AUTO_INCREMENT PRIMARY KEY,\n#    registered_date DATETIME,\n#    ì£¼ë¬¸ì²˜ VARCHAR(255),\n#    ì§€ì—­1 VARCHAR(255),\n#    ì§€ì—­2 VARCHAR(255),\n#    ì§€ì  VARCHAR(255),\n#    ì„¤ì¹˜ VARCHAR(255),\n#    ê¸°ì‚¬ì—°ë½ì²˜ VARCHAR(20),\n#    ë¹„ìš© DECIMAL(10, 2),\n#    ì²­êµ¬ì›” VARCHAR(50),\n#    ì¦ë¹™ìœ í˜• VARCHAR(50),\n#    ì¶”ê°€ë¹„ìš© DECIMAL(10, 2),\n#    ì²­êµ¬ì›”2 VARCHAR(50),\n#    ì§€ê¸‰ê¸°ì•ˆ VARCHAR(50),\n#    ì„¤ì¹˜ì—¬ë¶€ BOOLEAN,\n#    ì´ë¦„ VARCHAR(255),\n#    ì—°ë½ì²˜ VARCHAR(20),\n#    ì£¼ì†Œ VARCHAR(255),\n#    ìƒí’ˆëª… VARCHAR(255),\n#    ìƒí’ˆì˜µì…˜ VARCHAR(255),\n#    ë°°ì†¡ë©”ì‹œì§€ TEXT,\n#    íŠ¹ì´ì‚¬í•­ TEXT,\n#    UNIQUE KEY unique_record (registered_date, ì—°ë½ì²˜,ì£¼ì†Œ)\n#) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;\n\nUnique Key ì„¤ì •: ìœ„ ì˜ˆì œì—ì„œ ë³´ë©° registered_date, ì—°ë½ì²˜ì™€ ì£¼ì†Œ 3ê°œì˜ ì¹¼ëŸ¼ì´ ê°™ì„ ê²½ìš°ëŠ” ìƒˆë¡œìš´ rowë¥¼ ì¶”ê°€í•˜ì§€ ì•Šê³  ì—…ë°ì´íŠ¸í•˜ë„ë¡ unique keyë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>Database - MySQL</span>"
    ]
  },
  {
    "objectID": "database.html#ì½”ë“œ-ë¶„ì„",
    "href": "database.html#ì½”ë“œ-ë¶„ì„",
    "title": "5Â  Database - MySQL",
    "section": "5.4 ì½”ë“œ ë¶„ì„",
    "text": "5.4 ì½”ë“œ ë¶„ì„\n\n5.4.1 MySQL DB ì—°ê²°\n#conn = mysql.connector.connect(\n#    user=os.getenv('SQL_USER'),\n#    password=os.getenv('SQL_PASSWORD'),\n#    host=os.getenv('SQL_HOST'),\n#    database=os.getenv('SQL_DATABASE'),\n#    charset='utf8mb4',\n#    collation='utf8mb4_general_ci'\n#)\n\n\ní™˜ê²½ ë³€ìˆ˜ì—ì„œ ê°€ì ¸ì˜¨ ìê²© ì¦ëª…ìœ¼ë¡œ MySQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ì„ ì„¤ì •í•œë‹¤. charsetê³¼ collationì„ UTF-8ë¡œ ì„¤ì •í•´ í•œêµ­ì–´ì™€ ê°™ì€ ë¬¸ìë¥¼ ì ì ˆíˆ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•œë‹¤.\n\n\n\n5.4.2 ì•„ì¹´ë¼ ì¹´í˜\n\n5.4.2.1 ë°ì´í„° ì €ì¥\n#def save_to_mysql(self, df):\n#    \"\"\"Save DataFrame to MySQL database.\"\"\"\n#    try:\n#        # Connect to MySQL database\n#       conn = mysql.connector.connect(**self.db_config)\n#       cursor = conn.cursor()\n#\n#        # Replace NaN with None for MySQL compatibility\n#        df = df.where(pd.notnull(df), None)\n#        # Insert data into MySQL, checking for duplicates\n#       for _, row in df.iterrows():\n#            # Check if the row already exists\n#            check_sql = \"\"\"\n#            SELECT COUNT(*) FROM aqara_cafe WHERE registered_date = %s AND title = %s\n#            \"\"\"\n#            cursor.execute(check_sql, (row['registered_date'], row['title']))\n#            result = cursor.fetchone()\n#\n#            if result[0] == 0:  # If no existing row found\n#                insert_sql = \"\"\"\n#                INSERT INTO aqara_cafe (registered_date, devices, title, question, answers)\n#                VALUES (%s, %s, %s, %s, %s)\n#                \"\"\"\n#               cursor.execute(insert_sql, tuple(row))\n#        \n#        conn.commit()\n#       cursor.close()\n#        conn.close()\n#        print(\"Data saved to MySQL successfully!\")\n#   except mysql.connector.Error as err:\n#        print(f\"Error: {err}\")\n\nsave_to_mysql() í•¨ìˆ˜ëŠ” í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ MySQL ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\nNaNì²˜ë¦¬: df.where(pd.notnull(df), None): MySQLì—ì„œëŠ” NaN ê°’ì„ NULLë¡œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì—ì„œ DataFrameì˜ NaN ê°’ì„ MySQLì— í˜¸í™˜ë˜ëŠ” Noneìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n\n\n\n5.4.2.2 ì¤‘ë³µ ë°ì´í„° í™•ì¸ë° ì²˜ë¦¬\nSELECT COUNT(*) FROM aqara_cafe WHERE registered_date = %s AND title = %s\n\nì´ ì¿¼ë¦¬ëŠ” í…Œì´ë¸”ì—ì„œ ë“±ë¡ëœ ë‚ ì§œì™€ ì œëª©ì´ ê°™ì€ ë°ì´í„°ë¥¼ í™•ì¸í•˜ëŠ” ì¿¼ë¦¬ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¤‘ë³µëœ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.\ncursor.execute(check_sql, (row[â€˜registered_dateâ€™], row[â€˜titleâ€™])): row[â€˜registered_dateâ€™]ì™€ row[â€˜titleâ€™] ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•œë‹¤.\n\n\n\n5.4.2.3 ë°ì´í„° ì‚½ì…\n#INSERT INTO aqara_cafe (registered_date, devices, title, question, answers)\n#VALUES (%s, %s, %s, %s, %s)\n\nì´ ì¿¼ë¦¬ëŠ” MySQL í…Œì´ë¸” aqara_cafeì— ë°ì´í„°ë¥¼ ì‚½ì…í•˜ëŠ” SQL ë¬¸ì´ë‹¤. ê° í–‰ì˜ ë°ì´í„°ë¥¼ í…Œì´ë¸”ì— ì‚½ì…í•œë‹¤.\ncursor.execute(insert_sql, tuple(row)): ê° í–‰ì˜ ë°ì´í„°ë¥¼ SQL ì¿¼ë¦¬ì˜ %s ìë¦¬ì— ì‚½ì…í•´ MySQLì— ì¶”ê°€í•œë‹¤.\n\n\n\n\n5.4.3 \nìˆ˜ê±° ì‹ ì²­ ëŒ€ì¥\n\n5.4.3.1 ê¸°ì¡´ ë°ì´í„° ìœ ë¬´ í™•ì¸\n#check_query = \"\"\"\n#SELECT COUNT(*) FROM service_ledger \n#WHERE registered_date = %s AND ê³ ê°ëª… = %s AND ì£¼ë¬¸ë²ˆí˜¸ = %s AND ì œí’ˆ = %s\n#\"\"\"\n#cursor.execute(check_query, (row['registered_date'], row['ê³ ê°ëª…'], row['ì£¼ë¬¸ë²ˆí˜¸'], row['ì œí’ˆ']))\n#result = cursor.fetchone()\n\në™ì¼í•œ registered_date, ê³ ê°ëª…, ì£¼ë¬¸ë²ˆí˜¸, ê·¸ë¦¬ê³  ì œí’ˆì„ ê°€ì§„ ë ˆì½”ë“œê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.\ncursor.execute()ë¡œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³ , cursor.fetchone()ìœ¼ë¡œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¨ë‹¤.\n\n\n\n5.4.3.2 ì—…ë°ì´íŠ¸ ë¡œì§\n#if result[0] &gt; 0:\n#    update_query = \"\"\"\n#    UPDATE service_ledger \n#    SET ì™„ë£Œ = %s, ì‘ì„±ì = %s, êµ¬ë¶„ = %s, ì‚¬ìœ  = %s, ë°°ì†¡ë¹„ = %s, ...\n#    WHERE registered_date = %s AND ê³ ê°ëª… = %s AND ì£¼ë¬¸ë²ˆí˜¸ = %s AND ì œí’ˆ = %s\n#    \"\"\"\n#    cursor.execute(update_query, ...)\n#else:\n#    insert_query = \"\"\"\n#    INSERT INTO service_ledger (ì™„ë£Œ, registered_date, ì‘ì„±ì, êµ¬ë¶„, ì‚¬ìœ , ...) \n#    VALUES (%s, %s, %s, %s, ...)\n#    \"\"\"\n#    cursor.execute(insert_query, ...)\n\nì—…ë°ì´íŠ¸ ë¡œì§: ë§Œì•½ ë™ì¼í•œ ë ˆì½”ë“œê°€ ì¡´ì¬í•˜ë©´, ê¸°ì¡´ì˜ ë ˆì½”ë“œë¥¼ UPDATE ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\nì‚½ì… ë¡œì§: ë™ì¼í•œ ë ˆì½”ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, ìƒˆë¡œìš´ ë ˆì½”ë“œë¥¼ INSERT ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ ì‚½ì…í•©ë‹ˆë‹¤.\n\n\n\n\n5.4.4 ì„¤ì¹˜ ê¸°ì‚¬ ë°°ì •\n\n5.4.4.1 ë°ì´í„° ì‚½ì… ë° ì—…ë°ì´íŠ¸ ì¿¼ë¦¬\n#for index, row in df.iterrows():\n#    if row['ì£¼ë¬¸ë²ˆí˜¸'] and pd.notna(row['ì£¼ë¬¸ë²ˆí˜¸']):\n#        sql = \"\"\"\n#            INSERT INTO installation_ledger \n#            (registered_date, ì¶œê³ ë‚ ì§œ, ê³ ê°ëª…, ì—°ë½ì²˜, ì£¼ë¬¸ë²ˆí˜¸, ì£¼ì†Œ, êµ¬ë§¤í’ˆëª©,\n#            ë„ì–´ë½, ë„ì–´ë²¨, ì¡°ëª…ìŠ¤ìœ„ì¹˜, ì»¤íŠ¼, ë‚´ìš©í™•ì¸, ê¸°ì‚¬ë‹˜ì„±í•¨, í•´í”¼ì½œì˜ˆì •ì¼, \n#            ì„¤ì¹˜ì˜ˆì •ì¼, ì„¤ì¹˜ì™„ë£Œì—¬ë¶€, ìœ ìƒ, ë¹„ê³ _ì•„ì¹´ë¼, ë¹„ê³ _í”¼ì—˜)\n#            VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, #%s)\n#           ON DUPLICATE KEY UPDATE\n#            registered_date = VALUES(registered_date),\n#            ì¶œê³ ë‚ ì§œ = VALUES(ì¶œê³ ë‚ ì§œ),\n#            ê³ ê°ëª… = VALUES(ê³ ê°ëª…),\n#           ì—°ë½ì²˜ = VALUES(ì—°ë½ì²˜),\n#            ì£¼ì†Œ = VALUES(ì£¼ì†Œ),\n#            êµ¬ë§¤í’ˆëª© = VALUES(êµ¬ë§¤í’ˆëª©),\n#            ë„ì–´ë½ = VALUES(ë„ì–´ë½),\n#            ë„ì–´ë²¨ = VALUES(ë„ì–´ë²¨),\n#            ì¡°ëª…ìŠ¤ìœ„ì¹˜ = VALUES(ì¡°ëª…ìŠ¤ìœ„ì¹˜),\n#            ì»¤íŠ¼ = VALUES(ì»¤íŠ¼),\n#            ë‚´ìš©í™•ì¸ = VALUES(ë‚´ìš©í™•ì¸),\n#            ê¸°ì‚¬ë‹˜ì„±í•¨ = VALUES(ê¸°ì‚¬ë‹˜ì„±í•¨),\n#            í•´í”¼ì½œì˜ˆì •ì¼ = VALUES(í•´í”¼ì½œì˜ˆì •ì¼),\n#            ì„¤ì¹˜ì˜ˆì •ì¼ = VALUES(ì„¤ì¹˜ì˜ˆì •ì¼),\n#            ì„¤ì¹˜ì™„ë£Œì—¬ë¶€ = VALUES(ì„¤ì¹˜ì™„ë£Œì—¬ë¶€),\n#            ìœ ìƒ = VALUES(ìœ ìƒ),\n#            ë¹„ê³ _ì•„ì¹´ë¼ = VALUES(ë¹„ê³ _ì•„ì¹´ë¼),\n#            ë¹„ê³ _í”¼ì—˜ = VALUES(ë¹„ê³ _í”¼ì—˜)\n#        \"\"\"\n#        values = (\n#            row['registered_date'], row['ì¶œê³ ë‚ ì§œ'], row['ê³ ê°ëª…'], row['ì—°ë½ì²˜'], #row['ì£¼ë¬¸ë²ˆí˜¸'], row['ì£¼ì†Œ'], row['êµ¬ë§¤í’ˆëª©'],\n#            row['ë„ì–´ë½'], row['ë„ì–´ë²¨'], row['ì¡°ëª…ìŠ¤ìœ„ì¹˜'], row['ì»¤íŠ¼'], row['ë‚´ìš©í™•ì¸'], #row['ê¸°ì‚¬ë‹˜ì„±í•¨'], row['í•´í”¼ì½œì˜ˆì •ì¼'],\n#            row['ì„¤ì¹˜ì˜ˆì •ì¼'], row['ì„¤ì¹˜ì™„ë£Œì—¬ë¶€'], row['ìœ ìƒ'], row['ë¹„ê³ _ì•„ì¹´ë¼'], #row['ë¹„ê³ _í”¼ì—˜']\n#        )\n#        \n#       cursor.execute(sql, values)\n\ndf.iterrows()ë¥¼ ì‚¬ìš©í•´ DataFrameì˜ ê° í–‰ì„ ìˆœíšŒí•˜ë©°, ì£¼ë¬¸ë²ˆí˜¸ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì—ë§Œ MySQLì— ë°ì´í„°ë¥¼ ì‚½ì… ë˜ëŠ” ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\nì¿¼ë¦¬ ì„¤ëª…:\n\nINSERT INTO installation_ledger: ë°ì´í„°ë¥¼ ì‚½ì…í•˜ëŠ” SQL ì¿¼ë¦¬ì…ë‹ˆë‹¤.\nON DUPLICATE KEY UPDATE: ë§Œì•½ ì¤‘ë³µëœ í‚¤(ì˜ˆ: ì£¼ë¬¸ë²ˆí˜¸)ê°€ ìˆìœ¼ë©´ ê¸°ì¡´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\nVALUES(): ê° í–‰ì˜ ë°ì´í„°ë¥¼ SQL ì¿¼ë¦¬ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.\n\n\n\n\n\n5.4.5 ì»¤íŠ¼/ë¸”ë¼ì¸ë“œ ì„¤ì¹˜\n#insert_query = \"\"\"\n#    INSERT INTO curtain_ledger \n#    (registered_date, í”Œë«í¼, ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸, ìƒí’ˆëª…, ìˆ˜ëŸ‰, ìˆ˜ì·¨ì¸ëª…, ìˆ˜ì·¨ì¸ì—°ë½ì²˜1, \n#     ìˆ˜ì·¨ì¸ì—°ë½ì²˜2, ë°°ì†¡ì§€, êµ¬ë§¤ìì—°ë½ì²˜, ìš°í¸ë²ˆí˜¸, ë°°ì†¡ë©”ì„¸ì§€, ì˜µì…˜ì •ë³´, \n#     ì˜µì…˜ê´€ë¦¬ì½”ë“œ, ë°°ì†¡ë°©ë²•, íƒë°°ì‚¬, ì†¡ì¥ë²ˆí˜¸)\n#    VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)\n#    ON DUPLICATE KEY UPDATE\n#    registered_date = VALUES(registered_date),\n#    í”Œë«í¼ = VALUES(í”Œë«í¼),\n#    ìƒí’ˆëª… = VALUES(ìƒí’ˆëª…),\n#    ìˆ˜ëŸ‰ = VALUES(ìˆ˜ëŸ‰),\n#    ìˆ˜ì·¨ì¸ëª… = VALUES(ìˆ˜ì·¨ì¸ëª…),\n#    ìˆ˜ì·¨ì¸ì—°ë½ì²˜1 = VALUES(ìˆ˜ì·¨ì¸ì—°ë½ì²˜1),\n#   ìˆ˜ì·¨ì¸ì—°ë½ì²˜2 = VALUES(ìˆ˜ì·¨ì¸ì—°ë½ì²˜2),\n#    ë°°ì†¡ì§€ = VALUES(ë°°ì†¡ì§€),\n#    êµ¬ë§¤ìì—°ë½ì²˜ = VALUES(êµ¬ë§¤ìì—°ë½ì²˜),\n#    ìš°í¸ë²ˆí˜¸ = VALUES(ìš°í¸ë²ˆí˜¸),\n#    ë°°ì†¡ë©”ì„¸ì§€ = VALUES(ë°°ì†¡ë©”ì„¸ì§€),\n#    ì˜µì…˜ì •ë³´ = VALUES(ì˜µì…˜ì •ë³´),\n#    ì˜µì…˜ê´€ë¦¬ì½”ë“œ = VALUES(ì˜µì…˜ê´€ë¦¬ì½”ë“œ),\n#    ë°°ì†¡ë°©ë²• = VALUES(ë°°ì†¡ë°©ë²•),\n#    íƒë°°ì‚¬ = VALUES(íƒë°°ì‚¬),\n#    ì†¡ì¥ë²ˆí˜¸ = VALUES(ì†¡ì¥ë²ˆí˜¸)\n#\"\"\"\n\nSQL ì¿¼ë¦¬: INSERT INTO êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤. ë™ì‹œì— ON DUPLICATE KEY UPDATEë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µëœ í‚¤ê°€ ìˆì„ ê²½ìš° ê¸°ì¡´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n\n\n5.4.5.1 íŠ¸ëœì­ì…˜ ì¬ì‹œë„ ë° ì»¤ë°‹\n#retry_count = 3\n#for index, row in df.iterrows():\n#    # ìˆ˜ëŸ‰ì´ ë¹ˆ ê°’ì´ê±°ë‚˜ ìˆ«ìë¡œ ë³€í™˜í•  ìˆ˜ ì—†ìœ¼ë©´ 0ìœ¼ë¡œ ì²˜ë¦¬\n#    try:\n#        quantity = int(row['ìˆ˜ëŸ‰']) if row['ìˆ˜ëŸ‰'].strip() else 0\n#    except ValueError:\n#        quantity = 0\n#    \n#    values = (row['registered_date'], row['í”Œë«í¼'], row['ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸'], row['ìƒí’ˆëª…'], #uantity, ...)\n#   \n#    for attempt in range(retry_count):\n#        try:\n#            cursor.execute(insert_query, values)\n#            break  # ì„±ê³µ ì‹œ ë£¨í”„ íƒˆì¶œ\n#        except mysql.connector.Error as err:\n#            if err.errno == 1205:  # Lock wait timeout\n#                st.write(f\"Lock wait timeout, ì¬ì‹œë„ ì¤‘: {attempt + 1}\")\n#               time.sleep(2)  # ì ì‹œ ëŒ€ê¸° í›„ ì¬ì‹œë„\n#           else:\n#                raise  # ë‹¤ë¥¸ ì˜¤ë¥˜ ë°œìƒ ì‹œ\n#\n#cursor.close()\n#conn.close()\n\nì¬ì‹œë„ ë¡œì§: MySQLì—ì„œ íŠ¸ëœì­ì…˜ì´ ì‹¤íŒ¨í•  ê²½ìš°(ì˜ˆ: ì ê¸ˆ ëŒ€ê¸° ì‹œê°„ ì´ˆê³¼) ìµœëŒ€ 3ë²ˆê¹Œì§€ ì¬ì‹œë„í•©ë‹ˆë‹¤.\níŠ¸ëœì­ì…˜ ì²˜ë¦¬: ê° ë°ì´í„° í–‰ì„ MySQLì— ì‚½ì… ë˜ëŠ” ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n\n\n\n\n5.4.6 ë„ì–´ë½ ì„¤ì¹˜ ê¸°ì‚¬ ë°°ì •\n\n5.4.6.1 ë°ì´í„° ì‚½ì… ë˜ëŠ” ì—…ë°ì´íŠ¸ ì¿¼ë¦¬\n#query = \"\"\"\n#INSERT INTO doorlock_installation_ledger (\n#    registered_date, ì£¼ë¬¸ì²˜, ì§€ì—­1, ì§€ì—­2, ì§€ì , ì„¤ì¹˜, ê¸°ì‚¬ì—°ë½ì²˜, ë¹„ìš©, ì²­êµ¬ì›”, ì¦ë¹™ìœ í˜•, #ì¶”ê°€ë¹„ìš©, ì²­êµ¬ì›”2, ì§€ê¸‰ê¸°ì•ˆ, ì„¤ì¹˜ì—¬ë¶€, ì´ë¦„, ì—°ë½ì²˜, ì£¼ì†Œ, ìƒí’ˆëª…, ìƒí’ˆì˜µì…˜, ë°°ì†¡ë©”ì‹œì§€, #íŠ¹ì´ì‚¬í•­\n#) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)\n#ON DUPLICATE KEY UPDATE\n#    ì£¼ë¬¸ì²˜ = VALUES(ì£¼ë¬¸ì²˜),\n#    ì§€ì—­1 = VALUES(ì§€ì—­1),\n#    ì§€ì—­2 = VALUES(ì§€ì—­2),\n#    ì§€ì  = VALUES(ì§€ì ),\n#    ì„¤ì¹˜ = VALUES(ì„¤ì¹˜),\n#    ê¸°ì‚¬ì—°ë½ì²˜ = VALUES(ê¸°ì‚¬ì—°ë½ì²˜),\n#    ë¹„ìš© = VALUES(ë¹„ìš©),\n#    ì²­êµ¬ì›” = VALUES(ì²­êµ¬ì›”),\n#    ì¦ë¹™ìœ í˜• = VALUES(ì¦ë¹™ìœ í˜•),\n#    ì¶”ê°€ë¹„ìš© = VALUES(ì¶”ê°€ë¹„ìš©),\n#    ì²­êµ¬ì›”2 = VALUES(ì²­êµ¬ì›”2),\n#    ì§€ê¸‰ê¸°ì•ˆ = VALUES(ì§€ê¸‰ê¸°ì•ˆ),\n#    ì„¤ì¹˜ì—¬ë¶€ = VALUES(ì„¤ì¹˜ì—¬ë¶€),\n#    ì´ë¦„ = VALUES(ì´ë¦„),\n#    ìƒí’ˆëª… = VALUES(ìƒí’ˆëª…),\n#    ìƒí’ˆì˜µì…˜ = VALUES(ìƒí’ˆì˜µì…˜),\n#    ë°°ì†¡ë©”ì‹œì§€ = VALUES(ë°°ì†¡ë©”ì‹œì§€),\n#    íŠ¹ì´ì‚¬í•­ = VALUES(íŠ¹ì´ì‚¬í•­)\n#\"\"\"\n\nSQL ì¿¼ë¦¬: INSERT INTO êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê³ , ì¤‘ë³µ í‚¤ê°€ ë°œìƒí•  ê²½ìš° ê¸°ì¡´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ON DUPLICATE KEY UPDATE êµ¬ë¬¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n\n\n5.4.6.2 ë°ì´í„° ì‚½ì… ë˜ëŠ” ì—…ë°ì´íŠ¸ ì²˜ë¦¬\n#def insert_or_update_data(df):\n#    try:\n#        for index, row in df.iterrows():\n#            values = [\n#                row['registered_date'].strftime('%Y-%m-%d %H:%M:%S') if #row['registered_date'] else None,\n#                row['ì£¼ë¬¸ì²˜'], row['ì§€ì—­1'], row['ì§€ì—­2'], row['ì§€ì '], row['ì„¤ì¹˜'], #row['ê¸°ì‚¬ì—°ë½ì²˜'],\n#                clean_cost_value(row['ë¹„ìš©']), row['ì²­êµ¬ì›”'], row['ì¦ë¹™ìœ í˜•'], #clean_cost_value(row['ì¶”ê°€ë¹„ìš©']),\n#                row['ì²­êµ¬ì›”2'], row['ì§€ê¸‰ê¸°ì•ˆ'], 1 if row['ì„¤ì¹˜ì—¬ë¶€'] == 'TRUE' else 0,\n#                row['ì´ë¦„'], row['ì—°ë½ì²˜'], row['ì£¼ì†Œ'], row['ìƒí’ˆëª…'], row['ìƒí’ˆì˜µì…˜'], #row['ë°°ì†¡ë©”ì‹œì§€'], row['íŠ¹ì´ì‚¬í•­']\n#            ]\n#            cursor.execute(query, values)\n#        conn.commit()\n#        st.write(\"ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ MySQLì— ì €ì¥ë˜ì—ˆê±°ë‚˜ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\")\n#    except Error as e:\n#        st.write(f\"Error while connecting to MySQL: {e}\")\n#    finally:\n#        cursor.close()\n#        conn.close()\n\në°ì´í„° ì‚½ì…/ì—…ë°ì´íŠ¸: ê° ë°ì´í„° í–‰ì„ INSERT INTO ì¿¼ë¦¬ë¥¼ í†µí•´ MySQLì— ì‚½ì…í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•œë‹¤.\n\n\n\n\n5.4.7 ë„ì–´ë½ ì„¤ì¹˜ íŒŒíŠ¸ë„ˆ\n\n5.4.7.1 ë°ì´í„° ì‚½ì… ë° ì—…ë°ì´íŠ¸ ì¿¼ë¦¬\n#query = \"\"\"\n#INSERT INTO doorlock_installation_partners (\n#    registered_date, ì§€ì—­1, ì§€ì—­2, ëŒ€ë¦¬ì , ë‹´ë‹¹ìì½”ë“œ, ëŒ€í‘œ, ì—°ë½ì²˜, ì£¼ì†Œ,\n#    ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, ì€í–‰, ê³„ì¢Œ, ì´ë¦„, ì„¸ê¸ˆê³„ì‚°ì„œ, í”Œë¼ì, ê¸°íƒ€\n#) VALUES (\n#    %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s\n#) ON DUPLICATE KEY UPDATE\n#    ì§€ì—­1 = VALUES(ì§€ì—­1),\n#    ë‹´ë‹¹ìì½”ë“œ = VALUES(ë‹´ë‹¹ìì½”ë“œ),\n#    ëŒ€í‘œ = VALUES(ëŒ€í‘œ),\n#    ì—°ë½ì²˜ = VALUES(ì—°ë½ì²˜),\n#   ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ = VALUES(ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸),\n#   ì€í–‰ = VALUES(ì€í–‰),\n#    ê³„ì¢Œ = VALUES(ê³„ì¢Œ),\n#   ì´ë¦„ = VALUES(ì´ë¦„),\n#    ì„¸ê¸ˆê³„ì‚°ì„œ = VALUES(ì„¸ê¸ˆê³„ì‚°ì„œ),\n#   í”Œë¼ì = VALUES(í”Œë¼ì),\n#   ê¸°íƒ€ = VALUES(ê¸°íƒ€);\n#\"\"\n#\n#def insert_or_update_data(df):\n#   try:\n#        for index, row in df.iterrows():\n#            values = [\n#                row['registered_date'].strftime('%Y-%m-%d %H:%M:%S') if #row['registered_date'] else None,\n#                row['ì§€ì—­1'], row['ì§€ì—­2'], row['ëŒ€ë¦¬ì '], row['ë‹´ë‹¹ìì½”ë“œ'], row['ëŒ€í‘œ'], #row['ì—°ë½ì²˜'], \n#               row['ì£¼ì†Œ'], row['ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸'], row['ì€í–‰'], row['ê³„ì¢Œ'], row['ì†Œìœ ìëª…'],row['ì„¸ê¸ˆê³„ì‚°ì„œ'], row['í”Œë¼ì'], row['ê¸°íƒ€']\n#            ]\n#            cursor.execute(query, values)\n#        conn.commit()\n#        st.write(\"ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ MySQLì— ì €ì¥ë˜ì—ˆê±°ë‚˜ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.\")\n#    except Error as e:\n#        st.write(f\"Error while connecting to MySQL: {e}\")\n#    finally:\n#        cursor.close()\n#        conn.close()\n\nINSERT INTO ë° ON DUPLICATE KEY UPDATE: ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ë¥¼ ì‚½ì…í•  ë•Œ, ë§Œì•½ ê¸°ì¡´ì— ë™ì¼í•œ í‚¤(ì˜ˆ: ì—°ë½ì²˜)ê°€ ì¡´ì¬í•˜ë©´ í•´ë‹¹ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì‚½ì…í•œë‹¤.\në°ì´í„° ì‚½ì…: ê° í–‰ì˜ ë°ì´í„°ë¥¼ SQL ì¿¼ë¦¬ì— ë§ì¶° ì¤€ë¹„í•˜ê³ , ë°˜ë³µë¬¸ì„ í†µí•´ ê° í–‰ì˜ ë°ì´í„°ë¥¼ MySQL í…Œì´ë¸”ì— ì‚½ì…í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•œë‹¤.\níŠ¸ëœì­ì…˜ ì»¤ë°‹: conn.commit()ì„ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì— ë³€ê²½ ì‚¬í•­ì„ ì»¤ë°‹í•˜ì—¬ ì €ì¥í•œë‹¤.\n\n\n\n\n5.4.8 ë„ì–´ë½ ë¶ˆëŸ‰ ëŒ€ì¥\n\n5.4.8.1 ë°ì´í„° ì‚½ì… ë° ì—…ë°ì´íŠ¸ ì¿¼ë¦¬\n#query = \"\"\"\n#INSERT INTO doorlock_malfunction_ledger (registered_date, ..., ë¹„ê³ )\n#VALUES (%s, %s, ..., %s)\n#ON DUPLICATE KEY UPDATE ì ‘ìˆ˜ì±„ë„ = VALUES(ì ‘ìˆ˜ì±„ë„), ..., ë¹„ê³  = VALUES(ë¹„ê³ );\n#\"\"\"\n\nINSERT INTO â€¦ ON DUPLICATE KEY UPDATE êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬, ë™ì¼í•œ ê³ ê°ëª…ê³¼ ê³ ê°ì—°ë½ì²˜ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ê°€ ì´ë¯¸ ì¡´ì¬í•  ê²½ìš°, ê¸°ì¡´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒˆ ë°ì´í„°ë¥¼ ì‚½ì…í•œë‹¤.\n\n#for index, row in df.iterrows():\n#    values = [\n#        row['registered_date'].strftime('%Y-%m-%d %H:%M:%S') if row['registered_date'] else #None,\n#        ...\n#    ]\n#    cursor.execute(query, values)\n#conn.commit()\n\në°ì´í„°í”„ë ˆì„ì˜ ê° í–‰ì— ëŒ€í•´ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ì—¬, MySQLì— ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•œë‹¤.\n\n\n\n\n5.4.9 ì—…ë¬´ì¼ì§€\n\n5.4.9.1 ì£¼ìš”ê¸°ëŠ¥\n\në°ì´í„° ì—…ë°ì´íŠ¸: ë™ì¼í•œ ë‚ ì§œì™€ ì—…ë¬´ ìœ í˜•ì˜ ë°ì´í„°ê°€ ìˆì„ ê²½ìš°, ê¸°ì¡´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ì—†ìœ¼ë©´ ìƒˆë¡œ ì¶”ê°€í•œë‹¤.\në°ì´í„° ì¡°íšŒ ë° ìë™ ì…ë ¥: ê¸°ì¡´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ í¼ì— ë¯¸ë¦¬ ì…ë ¥í•´ ì‚¬ìš©ì ê²½í—˜ì„ ê°œì„ í•œë‹¤.\n\n\n\n5.4.9.2 MySQL ë°ì´í„° ê²€ìƒ‰\n#cursor.execute(\"\"\"\n#    SELECT ì—…ë¬´ìœ í˜•, ì‘ì—…ì, ì—…ë¬´ì¼ì§€, ë¹„ê³  \n#    FROM work_journal \n#    WHERE DATE(registered_date) = %s AND ì—…ë¬´ìœ í˜• = %s\n#\"\"\", (registered_date_for_query, task_type))\n#existing_data = cursor.fetchone()\n\në°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì„ íƒëœ ë‚ ì§œì™€ ì—…ë¬´ ìœ í˜•ì— í•´ë‹¹í•˜ëŠ” ê¸°ì¡´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ ìˆìœ¼ë©´ í¼ì— ìë™ìœ¼ë¡œ ì±„ìš´ë‹¤.\n\n\n\n5.4.9.3 MySQL ë°ì´í„° ì €ì¥\n#cursor.execute(\"\"\"\n#    INSERT INTO work_journal (registered_date, ì—…ë¬´ìœ í˜•, ì‘ì—…ì, ì—…ë¬´ì¼ì§€, ë¹„ê³ ) \n#    VALUES (%s, %s, %s, %s, %s)\n#\"\"\", (registered_date_for_db, task_type, worker, work_journal, note))\n\nMySQLì—ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•œë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>5</span>Â  <span class='chapter-title'>Database - MySQL</span>"
    ]
  },
  {
    "objectID": "cafe24.html",
    "href": "cafe24.html",
    "title": "6Â  ì•„ì¹´ë¼ë¼ì´í”„ ìì‚¬ëª°(ì¹´í˜24) API ì—°ë™",
    "section": "",
    "text": "6.1 ì¸ì¦ ì ˆì°¨ ë° API í™œìš©",
    "crumbs": [
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>ì•„ì¹´ë¼ë¼ì´í”„ ìì‚¬ëª°(ì¹´í˜24) API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "cafe24.html#ì¸ì¦-ì ˆì°¨-ë°-api-í™œìš©",
    "href": "cafe24.html#ì¸ì¦-ì ˆì°¨-ë°-api-í™œìš©",
    "title": "6Â  ì•„ì¹´ë¼ë¼ì´í”„ ìì‚¬ëª°(ì¹´í˜24) API ì—°ë™",
    "section": "",
    "text": "6.1.1 ì¸ì¦ ì ˆì°¨ ë° API ê°œìš”\n\n\n\n\n\n[ì°¸ê³  ì‚¬ì´íŠ¸]\n#Client ID/Secret ì–»ëŠ” ë°©ë²•: https://velog.io/(yl9517/Cafe24-Authentication?)-#%EC%9D%B8%EC%A6%9D%EB%B6%80%ED%84%B0-API-%ED%98%B8%EC%B6%9C%EA%B9%8C%EC%A7%80\n\n\n6.1.2 Authorization Code íšë“\nMall ID, Client IDì™€ Client Secret í•„ìš”\n\n# To get authentication code\n\nimport requests\nimport base64\nfrom urllib.parse import urlparse, parse_qs\n\nmall_id = \"xxxxxxx\"\nclient_id = \"xxxxxxxx\"\nclient_secret = \"xxxxxx\"\nstate = \"12345\"\nredirect_uri = \"https://xxxx.com\"\nscope = \"mall.read_product,mall.read_application,mall.write_application,mall.read_community,mall.write_community\"\n\n# ìš”ì²­ì„ ë³´ë‚¼ URL ì„¤ì •\nurl = f\"https://{mall_id}.cafe24api.com/api/v2/oauth/authorize?response_type=code&client_id={client_id}&state={state}&redirect_uri={redirect_uri}&scope={scope}\"\n\nprint(url)\n\n# GET ìš”ì²­ ë³´ë‚´ê¸°\nresponse = requests.get(url)\n\n# ì‘ë‹µ í™•ì¸\nif response.status_code == 302:\n    # Location í—¤ë”ì—ì„œ authorize_code ì¶”ì¶œ\n    redirect_url = response.headers['Location']\n    parsed_url = urlparse(redirect_url)\n    authorize_code = parse_qs(parsed_url.query)['code'][0]\n    print(\"Authorize Code:\", authorize_code)\nelse:\n    print(\"Authorization failed:\", response.text)\n\n\n6.1.3 Access Token íšë“\nìœ„ì—ì„œ íšë“í•œ authorization code ì‚¬ìš©\nimport requests\n\nmall_id = \"xxxxxxx\"\nclient_id = \"xxxxxxxx\"\nclient_secret = \"xxxxxx\"\nstate = \"12345\"\nredirect_uri = \"https://xxxx.com\"\nscope = \"mall.read_product,mall.read_application,mall.write_application,mall.read_community,mall.write_community\"\n\nauthorization_code =\"xxxxxxxx\"\n\n\n# ê¸°ë³¸ ì¸ì¦ ì •ë³´ ìƒì„±\nbasic_auth = f\"{client_id}:{client_secret}\"\nencoded_basic_auth = base64.b64encode(basic_auth.encode()).decode()\n\n# ìš”ì²­ URL ë° ë°ì´í„°\nurl = f\"https://{mall_id}.cafe24api.com/api/v2/oauth/token\"\nheaders = {\n    'Authorization': f\"Basic {encoded_basic_auth}\",\n    'Content-Type': 'application/x-www-form-urlencoded'\n}\ndata = {\n    'grant_type': 'authorization_code',\n    'code': authorization_code,\n    'redirect_uri': redirect_uri\n}\n\n# POST ìš”ì²­ ë³´ë‚´ê¸°\nresponse = requests.post(url, headers=headers, data=data)\n\n# ì‘ë‹µ í™•ì¸\nprint(response.json())\n\n\n\n6.1.4 Token ê°±ì‹ í•˜ê¸°\nimport requests\nimport base64\n\n# ë³€ìˆ˜ ì„¤ì •\nmall_id = \"xxxxxxx\"\nclient_id = \"xxxxxxxx\"\nclient_secret = \"xxxxxx\"\n\n# ê¸°ë³¸ ì¸ì¦ ì •ë³´ ìƒì„±\nbasic_auth = f\"{client_id}:{client_secret}\"\nencoded_basic_auth = base64.b64encode(basic_auth.encode()).decode()\n\n# ìš”ì²­ URL ì„¤ì •\nurl = f\"https://{mall_id}.cafe24api.com/api/v2/oauth/token\"\nheaders = {\n    'Authorization': f\"Basic {encoded_basic_auth}\",\n    'Content-Type': 'application/x-www-form-urlencoded'\n}\n\n# refresh.csv íŒŒì¼ì—ì„œ refresh token ê°’ì„ ì½ì–´ì˜´\nwith open('refresh.csv', 'r') as file:\n    refresh_token = file.read().strip()\n    \nrefresh_token =\"l2S54kScJFRrljTKxlZE8B\"\n# ìš”ì²­ ë°ì´í„° ì„¤ì •\ndata = {\n    'grant_type': 'refresh_token',\n    'refresh_token': refresh_token\n}\n\n# POST ìš”ì²­ ë³´ë‚´ê¸°\nresponse = requests.post(url, headers=headers, data=data)\n\n# access_token ë° refresh_token ê°’ ì½ì–´ì˜¤ê¸°\nif response.status_code == 200:\n    response_data = response.json()\n    access_token = response_data['access_token']\n    refresh_token = response_data['refresh_token']\n    print(\"Access Token:\", access_token)\n    print(\"Refresh Token:\", refresh_token)\n    print(response.json())\n    # refresh tokenì„ CSV íŒŒì¼ì— ì €ì¥\n    with open('refresh.csv', 'w') as file:\n        file.write(refresh_token)\nelse:\n    print(\"Error:\", response.text)\n\n\n\n6.1.5 ê²Œì‹œíŒ ì½ì–´ì˜¤ê¸° - ìƒí’ˆ ê²Œì‹œíŒ\nimport requests\nimport re\nimport datetime\nfrom bs4 import BeautifulSoup\nimport pandas as pd\n\nbulletin = 6\nurl = f\"https://aqarakr.cafe24api.com/api/v2/admin/boards/{bulletin}/articles\"\n\ninterval=60 # ì˜¤ëŠ˜ë¶€í„° ë©°ì¹  ì „ê¹Œì§€?\npayload = {}\nfiles = {}\nheaders = {\n    'Authorization': f'Bearer {access_token}',\n    'X-Cafe24-Api-Version': '2024-03-01',\n    'Content-Type': 'application/json',\n    'Cookie': 'xxxxxxxxxxx'\n}\n\n# í˜„ì¬ ë‚ ì§œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\ncurrent_date = datetime.datetime.now()\n\n# end_dateë¡œë¶€í„° 7ì¼ ì „ì˜ ë‚ ì§œë¥¼ êµ¬í•©ë‹ˆë‹¤.\nstart_date = current_date - datetime.timedelta(days=interval)\n\n# ë‚ ì§œë¥¼ ì›í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…í•©ë‹ˆë‹¤.\nstart_date_str = start_date.strftime('%Y-%m-%d')\nend_date_str = current_date.strftime('%Y-%m-%d')\n\ncurrent_date = datetime.datetime.now().strftime('%Y-%m-%d')\n\nparams = {\n    'start_date': start_date_str,\n    'end_date': end_date_str\n}\n\nresponse = requests.request(\"GET\", url, headers=headers, data=payload, files=files,params=params)\ndata = response.json()\n\narticles_data = []\nfor article in data['articles']:\n    # ê° ê¸°ì‚¬ì˜ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°\n    article_date = article['created_date']\n    # í•´ë‹¹ ë‚ ì§œì˜ ê¸°ì‚¬ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\n    content = article['content']\n    text = BeautifulSoup(content, \"html.parser\").get_text()\n    articles_data.append({'date': article_date, 'text': text})\n    #print(f\"Date: {article_date}\")\n    #print(text)\ndf = pd.DataFrame(articles_data)\nprint(df.head())\n\n\n6.1.6 ê²Œì‹œíŒ ì½ì–´ì˜¤ê¸° - 1:1 ê²Œì‹œíŒ\nbulletin = 9\nurl = f\"https://aqarakr.cafe24api.com/api/v2/admin/boards/{bulletin}/articles\"\n\ninterval=60 # ì˜¤ëŠ˜ë¶€í„° ë©°ì¹  ì „ê¹Œì§€?\npayload = {}\nfiles = {}\nheaders = {\n    'Authorization': f'Bearer {access_token}',\n    'X-Cafe24-Api-Version': '2024-03-01',\n    'Content-Type': 'application/json',\n    'Cookie': 'ECSESSID=5d169e847b0b49d2ff41047129114582'\n}\n\n# í˜„ì¬ ë‚ ì§œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\ncurrent_date = datetime.datetime.now()\n\n# end_dateë¡œë¶€í„° 7ì¼ ì „ì˜ ë‚ ì§œë¥¼ êµ¬í•©ë‹ˆë‹¤.\nstart_date = current_date - datetime.timedelta(days=interval)\n\n# ë‚ ì§œë¥¼ ì›í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…í•©ë‹ˆë‹¤.\nstart_date_str = start_date.strftime('%Y-%m-%d')\nend_date_str = current_date.strftime('%Y-%m-%d')\n\ncurrent_date = datetime.datetime.now().strftime('%Y-%m-%d')\n\nparams = {\n    'start_date': start_date_str,\n    'end_date': end_date_str\n}\n\nresponse = requests.request(\"GET\", url, headers=headers, data=payload, files=files,params=params)\ndata = response.json()\n\narticles_data = []\nfor article in data['articles']:\n    # ê° ê¸°ì‚¬ì˜ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°\n    article_date = article['created_date']\n    # í•´ë‹¹ ë‚ ì§œì˜ ê¸°ì‚¬ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\n    content = article['content']\n    text = BeautifulSoup(content, \"html.parser\").get_text()\n    articles_data.append({'date': article_date, 'text': text})\n    #print(f\"Date: {article_date}\")\n    #print(text)\ndf = pd.DataFrame(articles_data)\nprint(df.head())",
    "crumbs": [
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>ì•„ì¹´ë¼ë¼ì´í”„ ìì‚¬ëª°(ì¹´í˜24) API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "cafe24.html#ì£¼ìš”-ì½”ë“œ-ë¶„ì„",
    "href": "cafe24.html#ì£¼ìš”-ì½”ë“œ-ë¶„ì„",
    "title": "6Â  ì•„ì¹´ë¼ë¼ì´í”„ ìì‚¬ëª°(ì¹´í˜24) API ì—°ë™",
    "section": "6.2 ì£¼ìš” ì½”ë“œ ë¶„ì„",
    "text": "6.2 ì£¼ìš” ì½”ë“œ ë¶„ì„\n\n6.2.1 ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬\nrequests, base64, dotenv, datetime, BeautifulSoup, pandas, matplotlib, konlpy ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬:\n\nrequests: ì™¸ë¶€ APIì— HTTP ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì•„ì˜¤ëŠ”ë° ì‚¬ìš©ëœë‹¤.\nbase64: ê¸°ë³¸ ì¸ì¦ì— í•„ìš”í•œ í´ë¼ì´ì–¸íŠ¸ IDì™€ ì‹œí¬ë¦¿ì„ Base64ë¡œ ì¸ì½”ë”©í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.\ndotenv: í™˜ê²½ ë³€ìˆ˜ íŒŒì¼(.env)ì—ì„œ ì„¤ì •ê°’ì„ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.\ndatetime: ë‚ ì§œ ë° ì‹œê°„ ê´€ë ¨ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©ëœë‹¤.\nBeautifulSoup: HTMLì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.\npandas: ë°ì´í„°ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ ì €ì¥í•˜ê³  ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë°ì´í„°í”„ë ˆì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.\nmatplotlib: ê·¸ë˜í”„ì™€ ì‹œê°í™”ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.\nkonlpy: í•œêµ­ì–´ ìì—°ì–´ ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.\nCounter: ë‹¨ì–´ ë¹ˆë„ìˆ˜ ê³„ì‚°ì„ ìœ„í•´ ì‚¬ìš©ëœë‹¤.\n\n\n\n6.2.2 ê¸°ë³¸ ì¸ì¦ ì •ë³´ ìƒì„±\nbasic_auth = f\"{cafe24_client_id}:{cafe24_client_secret}\"\nencoded_basic_auth = base64.b64encode(basic_auth.encode()).decode()\n\ncafe24_client_id, cafe24_client_secret: dotenvë¡œë¶€í„° ë¶ˆëŸ¬ì˜¨ API ì ‘ê·¼ì— í•„ìš”í•œ ì¸ì¦ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ Base64ë¡œ ì¸ì½”ë”©í•œë‹¤. ì´ ì¸ì¦ ì •ë³´ë¥¼ ì‚¬ìš©í•´ APIì— ì ‘ê·¼í•œë‹¤.\n\n\n\n6.2.3 ë‚ ì§œ ë²”ìœ„ ì„¤ì • ë° API ìš”ì²­\ncurrent_date = datetime.datetime.now()\nstart_date = current_date - datetime.timedelta(days=params_interval)\nparams = {'start_date': start_date_str, 'end_date': end_date_str, 'limit': 100}\n\në‚ ì§œ ë²”ìœ„ ì„¤ì •: í˜„ì¬ ë‚ ì§œì—ì„œ ì‚¬ìš©ì ì…ë ¥ì— ë”°ë¼ ì§€ì •ëœ ì¼ìˆ˜(params_interval) ë§Œí¼ ì´ì „ ë‚ ì§œë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.\nAPI ìš”ì²­ íŒŒë¼ë¯¸í„°: ì§€ì •ëœ ë‚ ì§œ ë²”ìœ„ì™€ ë‹¤ë¥¸ ë§¤ê°œë³€ìˆ˜ë¥¼ API ìš”ì²­ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.\n\n\n\n6.2.4 HTML ë°ì´í„° ì²˜ë¦¬ ë° í…ìŠ¤íŠ¸ ì¶”ì¶œ\ncontent = article['content']\nfiltered_text = BeautifulSoup(content, \"html.parser\").get_text()\n\nBeautifulSoup: ì‘ë‹µë°›ì€ HTML í˜•ì‹ì˜ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬, í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ê° ê²Œì‹œë¬¼ì˜ ë³¸ë¬¸ ë‚´ìš©ì„ í•„í„°ë§í•˜ì—¬ í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œí•©ë‹ˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>6</span>Â  <span class='chapter-title'>ì•„ì¹´ë¼ë¼ì´í”„ ìì‚¬ëª°(ì¹´í˜24) API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "naver_smartstore.html",
    "href": "naver_smartstore.html",
    "title": "7Â  ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ API ì—°ë™",
    "section": "",
    "text": "7.1 ì¸ì¦ ì ˆì°¨",
    "crumbs": [
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "naver_smartstore.html#ì¸ì¦-ì ˆì°¨",
    "href": "naver_smartstore.html#ì¸ì¦-ì ˆì°¨",
    "title": "7Â  ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ API ì—°ë™",
    "section": "",
    "text": "7.1.1 ì¸ì¦ ê³¼ì • ì°¸ê³ \nìš”êµ¬ì‚¬í•­: Application IDì™€ Application Secret í•„ìš”\nìœ„ ì• í”Œë¦¬ì¼€ì´ì…˜ IDì™€ ì‹œí¬ë¦¿ì„ ì–»ëŠ” ë°©ë²•:\n#https://private.tistory.com/140#google_vignette\nì£¼ì˜:API ê·¸ë£¹ì˜ ê²½ìš° íŒë§¤ì ì •ë³´/ì£¼ë¬¸ íŒë§¤ì/ìƒí’ˆ/ë¬¸ì˜ ëª¨ë‘ í¬í•¨\n\n\n7.1.2 ì•¡ì„¸ìŠ¤ í† í° ìƒì„±\n\nimport time\nimport bcrypt\nimport pybase64\nimport urllib.parse\nimport requests\n\nclient_id = \"xxxxxx\"\nclient_secret = \"xxxxx\"\n\ndef get_token(client_id, client_secret):\n    try:\n        timestamp = str(int((time.time() - 3) * 1000))\n        pwd = f'{client_id}_{timestamp}'\n        hashed = bcrypt.hashpw(pwd.encode('utf-8'), client_secret.encode('utf-8'))\n        client_secret_sign = pybase64.standard_b64encode(hashed).decode('utf-8')\n\n        headers = {\"content-type\": \"application/x-www-form-urlencoded\"}\n        data_ = {\n            \"client_id\": client_id,\n            \"timestamp\": timestamp,\n            \"grant_type\": \"client_credentials\",\n            \"client_secret_sign\": client_secret_sign,\n            \"type\": \"SELF\"\n        }\n\n        # Encode data_ dictionary into a URL-encoded string\n        body = urllib.parse.urlencode(data_)\n\n        url = 'https://api.commerce.naver.com/external/v1/oauth2/token'\n        print(\"Request URL:\", url)\n        print(\"Request Body:\", body)\n\n        res = requests.post(url=url, headers=headers, data=body)\n        res.raise_for_status()  # Raise an exception for HTTP errors\n\n        res_data = res.json()\n        if 'access_token' in res_data:\n            return res_data['access_token']\n        else:\n            raise ValueError(f'Token request failed: {res_data}')\n    \n    except Exception as e:\n        print(f'Error occurred: {e}')\n        return None\n\nst_access_token = get_token(client_id=client_id, client_secret=client_secret)\nif st_access_token:\n    print(f'Issued token: {st_access_token}')\nelse:\n    print('Failed to obtain token.')",
    "crumbs": [
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ API ì—°ë™</span>"
    ]
  },
  {
    "objectID": "naver_smartstore.html#ì£¼ìš”-ì½”ë“œ-ë¶„ì„",
    "href": "naver_smartstore.html#ì£¼ìš”-ì½”ë“œ-ë¶„ì„",
    "title": "7Â  ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ API ì—°ë™",
    "section": "7.2 ì£¼ìš” ì½”ë“œ ë¶„ì„",
    "text": "7.2 ì£¼ìš” ì½”ë“œ ë¶„ì„\n\n7.2.1 í† í° ë°œê¸‰ í•¨ìˆ˜ (get_token)\ndef get_token(client_id, client_secret):\n    timestamp = str(int((time.time() - 3) * 1000))\n    pwd = f'{client_id}_{timestamp}'\n    hashed = bcrypt.hashpw(pwd.encode('utf-8'), client_secret.encode('utf-8'))\n    client_secret_sign = pybase64.standard_b64encode(hashed).decode('utf-8')\n\n    headers = {\"content-type\": \"application/x-www-form-urlencoded\"}\n    data_ = {\n        \"client_id\": client_id,\n        \"timestamp\": timestamp,\n        \"grant_type\": \"client_credentials\",\n        \"client_secret_sign\": client_secret_sign,\n        \"type\": \"SELF\"\n    }\n\n    body = urllib.parse.urlencode(data_)\n    url = 'https://api.commerce.naver.com/external/v1/oauth2/token'\n    res = requests.post(url=url, headers=headers, data=body)\n    res_data = res.json()\n    if 'access_token' in res_data:\n        return res_data['access_token']\n    else:\n        raise ValueError(f'Token request failed: {res_data}')\n\nì´ í•¨ìˆ˜ëŠ” í´ë¼ì´ì–¸íŠ¸ IDì™€ ì‹œí¬ë¦¿ì„ ê¸°ë°˜ìœ¼ë¡œ ë„¤ì´ë²„ APIì—ì„œ access_tokenì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤. bcryptì™€ pybase64 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ì¸ì¦ ì„œëª…ì„ ìƒì„±í•˜ê³ , ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ POST ìš”ì²­ì„ ë³´ë‚´ OAuth2 í† í°ì„ ë°›ì•„ì˜¨ë‹¤.\n\n\n\n7.2.2 Q&A ë°ì´í„° ê°€ì ¸ ì˜¤ê¸°\nif params_bulletin == \"Q&A\":\n    current_datetime = datetime.datetime.now()\n    to_date = current_datetime.strftime('%Y-%m-%dT%H:%M:%S.100+09:00')\n    from_date = (current_datetime - datetime.timedelta(days=params_interval)).strftime('%Y-%m-%dT%H:%M:%S.100+09:00')\n\n    base_url = \"https://api.commerce.naver.com/external/v1/contents/qnas\"\n    query_params = {'page': 1, 'size': 100, 'fromDate': from_date, 'toDate': to_date}\n    headers = { 'Authorization': f\"Bearer {st_access_token}\" }\n    response = requests.get(base_url, params=query_params, headers=headers)\n\nì‚¬ìš©ìê°€ ì„ íƒí•œ ê¸°ê°„(params_interval)ì— í•´ë‹¹í•˜ëŠ” Q&A ë°ì´í„°ë¥¼ ë„¤ì´ë²„ APIë¡œë¶€í„° ê°€ì ¸ì˜¨ë‹¤. ì´ ë•Œ fromDateì™€ toDateë¥¼ í¬í•¨í•œ URL ë§¤ê°œë³€ìˆ˜ì™€ í•¨ê»˜ GET ìš”ì²­ì„ ë³´ë‚¸ë‹¤.\n\n\n\n7.2.3 ì‘ë‹µ ë°ì´í„° ì²˜ë¦¬\narticles_data = []\nif response.status_code == 200:\n    data = response.json()\n    for qna in data['contents']:\n        createDate = qna['createDate']\n        question = qna['question']\n        answer = qna['answer'] if qna['answered'] == 1 else \"ë‹µë³€ í•„ìš”\"\n        articles_data.append({'date': createDate, 'question': question, 'answer': answer})\nelse:\n    print(\"Error:\", response.text)\n\nAPIë¡œë¶€í„° ë°›ì€ JSON ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì—¬, ê°ê°ì˜ Q&Aì— ëŒ€í•´ ì§ˆë¬¸ê³¼ ë‹µë³€ì„ ì¶”ì¶œí•œë‹¤. ë‹µë³€ì´ ì—†ëŠ” ê²½ìš° â€œë‹µë³€ í•„ìš”â€ë¡œ í‘œì‹œí•œë‹¤. ì´ë¥¼ DataFrameìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì‹œê°í™”í•  ìˆ˜ ìˆë‹¤.",
    "crumbs": [
      "<span class='chapter-number'>7</span>Â  <span class='chapter-title'>ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ API ì—°ë™</span>"
    ]
  }
]